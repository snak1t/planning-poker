(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{109:function(e,t,n){"use strict";n.d(t,"a",function(){return v}),n.d(t,"b",function(){return E}),n.d(t,"c",function(){return h});var a=n(51),r=n(16),c=n.n(r),u=n(32),i=n(44),o=n(1),s=n.n(o),l=n(600),f=n(576),m=n(274),p=n(121),d=n(17),g=n(58),v=s.a.createContext({games:[],removeGame:function(){return Promise.resolve()},addGame:function(){return Promise.resolve()},updateGame:function(){return Promise.resolve()},mergeGame:function(){}}),E=function(e){var t=e.initialGames,n=void 0===t?[]:t,r=e.children,E=e.readyToFetch,h=Object(o.useState)(n),O=Object(i.a)(h,2),b=O[0],k=O[1],j=Object(o.useContext)(d.a).user;Object(p.a)(Object(u.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,g.a.get("/api/game/user/".concat(j.info.email));case 5:return t=e.sent,n=t.data,e.abrupt("return",k(n.games));case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}},e,this,[[2,10]])})),[E]);var x=function(){var e=Object(u.a)(c.a.mark(function e(t){var n,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.delete("/api/game/",{params:{gameId:t}});case 3:n=e.sent,a=n.data,k(Object(f.a)(function(e){return e.id!==a.id})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.a.error(e.t0.message);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("/api/game",Object(a.a)({},t,{user:j.info.email}));case 3:n=e.sent,r=n.data,k(Object(m.a)(r.game)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.a.error(e.t0.message);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),y=function(e){k(function(t){return t.find(function(t){return t.id===e.id})?t.map(function(t){return t.id===e.id?Object(a.a)({},t,e):t}):t.concat(e)})},S=function(){var e=Object(u.a)(c.a.mark(function e(t){var n,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.put("/api/game",t);case 2:n=e.sent,a=n.data,y(a.game);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(v.Provider,{value:{games:b,removeGame:x,addGame:G,mergeGame:y,updateGame:S}},r)},h=function(e){return Object(o.useContext)(v).games.find(function(t){return t.id.toString()===e})}},121:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(1),r=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return a.useEffect.apply(void 0,[function(){e()}].concat(n))}},17:function(e,t,n){"use strict";n.d(t,"c",function(){return O}),n.d(t,"a",function(){return b}),n.d(t,"b",function(){return k}),n.d(t,"d",function(){return j});var a=n(44),r=n(16),c=n.n(r),u=n(32),i=n(51),o=n(1),s=n.n(o),l=n(151),f=n(243),m=new l.a(Object(i.a)({},{clientID:"Xxgco9YTcg99gVq4BTAykYxtJfYOC3rk",domain:"snkt.eu.auth0.com",responseType:"token id_token",audience:"https://snaks-planning-poker-api.herokuapp.com",redirectUri:"https://snak1t.github.io/planning-poker",scope:"openid profile email"})),p=function(){var e=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(o.useEffect)(function(){m.checkSession({prompt:"none"},t)},[]);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),d=function(){return Math.round(11*Math.random())},g=[1,3,5,8,10,12,13,15,17,20,22,24],v=[2,3,6,7,8,11,14,16,18,19,21,23],E=function(){m.authorize()},h=function(){m.logout({returnTo:"https://snak1t.github.io/planning-poker"})},O={NOT_ASKED:"NOT_ASKED",LOGGED_IN:"LOGGED_IN",LOGGED_OUT:"LOGGED_OUT",TEMP_USER:"TEMP_USER"},b=s.a.createContext(),k=Object(f.a)(function(e){var t=e.children,n=e.history,r=(e.location,Object(o.useState)({loginStatus:O.NOT_ASKED,info:null})),i=Object(a.a)(r,2),l=i[0],f=i[1];p(function(){var e=Object(u.a)(c.a.mark(function e(t,a){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return e.next=4,new Promise(function(e,t){m.parseHash(function(n,a){n?t(n):e(a)})});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=a;case 8:r=e.t0,f(r?{loginStatus:O.LOGGED_IN,info:r.idTokenPayload}:{loginStatus:O.LOGGED_OUT,info:null}),n.replace("/"),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(0),console.log(e.t1);case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t,n){return e.apply(this,arguments)}}());return s.a.createElement(b.Provider,{value:{login:E,logout:h,user:l,setTempUser:function(e,t){f({loginStatus:O.TEMP_USER,info:{name:e,email:e,picture:"male"===t?g[d()]:v[d()]}})}}},t)}),j=(b.Consumer,function(e,t){return e.loginStatus===O.LOGGED_IN&&t===e.info.email})},177:function(e,t,n){e.exports=n(273)},252:function(e,t,n){},273:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(9),u=n(603),i=n(580),o=n(38),s=n(39),l=n(599);function f(){var e=Object(o.a)(["\n    max-width: 320px;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return f=function(){return e},e}function m(){var e=Object(o.a)(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return m=function(){return e},e}var p=s.a.div(m()),d=Object(s.a)(l.a)(f()),g=n(57),v=n(17);function E(){var e=Object(a.useContext)(v.a).login;return r.a.createElement(p,null,r.a.createElement(d,null,r.a.createElement(g.a,{type:"primary",onClick:e},"Sign in")))}var h=n(604),O=n(152),b=n.n(O)()(function(e,t,n,a){return function(c){return e(a,c)?r.a.createElement(t,c):r.a.createElement(h.a,{to:{pathname:n,state:{from:c.location}}})}}),k=b(function(e){return"LOGGED_IN"!==e.loginStatus}),j=(b(function(e){var t=e.loginStatus;return"LOGGED_IN"===t||"LOGGED_OUT"===t}),b(function(e){return"LOGGED_IN"===e.loginStatus})),x=n(44),G=n(579),y=n(601),S=n(577),w=n(11);function _(){var e=Object(o.a)(["\n    text-align: center;\n"]);return _=function(){return e},e}function D(){var e=Object(o.a)(["\n    height: 100%;\n    padding: 1rem;\n    position: relative;\n"]);return D=function(){return e},e}function T(){var e=Object(o.a)(["\n    min-height: 100vh !important;\n"]);return T=function(){return e},e}var I=y.a.Content,N=y.a.Footer,L=y.a.Sider,C=Object(s.a)(y.a)(T()),P=Object(s.a)(I)(D()),U=Object(s.a)(N)(_()),M=function(e){var t=e.children,n=Object(a.useState)(!0),c=Object(x.a)(n,2),u=c[0],i=c[1],o=Object(a.useContext)(v.a),s=o.user,l=s.loginStatus,f=s.info,m=o.logout,p=o.login;return r.a.createElement(C,null,r.a.createElement(L,{collapsible:!0,collapsed:u,onCollapse:i},r.a.createElement(S.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},r.a.createElement(S.a.Item,{key:"1"},r.a.createElement(G.a,{to:"/"},r.a.createElement(w.a,{type:"home"}),r.a.createElement("span",null,"Main"))),l===v.c.LOGGED_IN?r.a.createElement(S.a.SubMenu,{key:"user-menu",title:r.a.createElement("span",null,r.a.createElement(w.a,{type:"user"}),r.a.createElement("span",{className:"nav-text"},f.name))},r.a.createElement(S.a.Item,{key:"user",onClick:m},r.a.createElement(w.a,{type:"logout"}),r.a.createElement("span",{className:"nav-text"},"Logout"))):r.a.createElement(S.a.Item,{key:"sing-in",onClick:p},r.a.createElement(w.a,{type:"login"}),r.a.createElement("span",{className:"nav-text"},"Login")))),r.a.createElement(y.a,null,r.a.createElement(P,null,t),r.a.createElement(U,null,"Planning Poker")))},A=(n(252),n(109)),K=r.a.lazy(function(){return Promise.all([n.e(0),n.e(6),n.e(2)]).then(n.bind(null,595))}),z=r.a.lazy(function(){return Promise.all([n.e(0),n.e(5),n.e(3)]).then(n.bind(null,594))});Object(c.render)(r.a.createElement(u.a,null,r.a.createElement(v.b,null,r.a.createElement(function(){var e=Object(a.useContext)(v.a).user.loginStatus,t=e===v.c.LOGGED_IN;return r.a.createElement(M,null,e!==v.c.NOT_ASKED?r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"loading ...")},r.a.createElement(A.b,{readyToFetch:t},r.a.createElement(i.a,{exact:!0,path:"/",render:j(K,"/sign-in",{loginStatus:e})}),r.a.createElement(i.a,{path:"/game/:user/:gameID",render:function(e){return r.a.createElement(z,e)}})),r.a.createElement(i.a,{path:"/sign-in",render:k(E,"/",{loginStatus:e})})):null)},null))),document.getElementById("root"))},58:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(60),r=n.n(a),c=function(e){var t="https://snaks-planning-poker-api.herokuapp.com";return(t.endsWith("/")?t.slice(-1):t)+(e.startsWith("/")?e:"/".concat(e))},u={get:function(e,t){return r.a.get(c(e),t)},post:function(e,t,n){return r.a.post(c(e),t,n)},put:function(e,t,n){return r.a.put(c(e),t,n)},delete:function(e,t){return r.a.delete(c(e),t)}}}},[[177,7,4]]]);
//# sourceMappingURL=main.e93d8c37.chunk.js.map