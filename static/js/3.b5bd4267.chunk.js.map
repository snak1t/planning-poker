{"version":3,"sources":["utils/hooks/useTextField.ts","components/FloatButtonsContainer/FloatButtonsContainer.tsx","Pages/Board/Components/Deck/atoms.ts","Data/socket.js","utils/hooks/useSocket.ts","Data/PlaySession/PlayRoomContext.tsx","Pages/Board/Components/Deck/deck.ts","Pages/Board/Components/Deck/Card.tsx","Pages/Board/Components/Deck/index.tsx","utils/average.score.js","Pages/Board/Components/RoundResults/TableResult.tsx","Pages/Board/Components/Table/Container.tsx","Pages/Board/Components/Stories/Item.tsx","Pages/Board/Components/Stories/Item.form.jsx","Data/Stories/StoriesContext.tsx","Pages/Board/Components/Stories/StoryItem.tsx","Pages/Board/Components/Stories/atoms.jsx","Pages/Board/Components/Report/Component.jsx","Pages/Board/Components/Report/Container.jsx","Pages/Board/Components/Stories/List.jsx","Pages/Board/Components/Stories/Form.jsx","Pages/Board/Components/Stories/Container.jsx","Pages/Board/Components/Player/TemporaryLoginForm.jsx","Pages/Board/Components/Player/atoms.tsx","Pages/Board/Components/Player/Player.tsx","Pages/Board/Components/Player/PlayersList.tsx","Pages/Board/atoms.js","Pages/Board/Components/Chat/atoms.js","Pages/Board/Components/Chat/ChatInputArea.jsx","Pages/Board/Components/Chat/ChatMessage.jsx","Pages/Board/Components/Chat/ChatThread.jsx","Pages/Board/Components/Chat/index.jsx","Pages/Board/Components/ActionButtons/ActionButtons.tsx","Pages/Board/index.js"],"names":["useTextField","initialValue","_useState","useState","_useState2","Object","_home_travis_build_snak1t_planning_poker_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","value","setValue","inputValue","valueToSet","target","FloatButtonsContainer","styled","div","_templateObject","CardListContainer","CardContainer","_templateObject2","_ref","cardPicked","_ref2","CardTopLeftCaption","_templateObject3","CardBottomRightCaption","_templateObject4","CardCenterCaption","_templateObject5","CardInnerContainer","_templateObject6","socket","openSocket","process","useSocket","types","useEffect","_arr","entries","_i","length","_ref6","slicedToArray","type","cb","on","_arr2","_i2","_ref5","_ref4","removeEventListener","data","emit","initialState","players","isPlaying","isRevealing","currentStory","PlayRoomContext","React","objectSpread","isCompleted","actions","enterRoom","leaveRoom","setStory","startPlayRound","showPlayedCards","setPlayerScore","resetPlayersScores","users","map","user","score","PlayRoomProvider","children","gameId","isAdmin","_React$useState","_React$useState2","gameStatus","setGameStatus","emitSocket2","self-append-user","newPlayer","prevState","newScores","playerScore","id","startsWith","info","login","append-user","_ref3","concat","emitPatch","apply-play-room-patch","patch","user-left","userId","filter","player","setAndEmitPatch","every","react","Provider","Math","random","storyId","DECK","StringScoreMap","coffee","question","âˆž","comparator","a","b","max","min","numberComparator","Card","_ref$onClick","onClick","displayedValue","test","className","toString","_onClick","apply","this","arguments","DeckContainer","useContext","AuthContext","myScore","setMyScore","handleCardPick","name","picture","react_default","createElement","card","Card_Card","assign","key","goldenRatio","sqrt","average","converge","divide","sum","getRoundedAverage","compose","ceil","calculateAverageForNumbers","n","round","pow","log","extractScores","pluck","divideScoresByType","groupBy","ifElse","is","String","always","calculateStringAnswer","cond","contains","T","calculationCondition","isNil","prop","calculateAverage","columns","title","dataIndex","sorter","localeCompare","defaultSortOrder","TableResult","table","dataSource","pagination","TableContainer","_useContext","Fragment","divider","TableResult_TableResult","Item","story","onSetEditMode","deleteStory","isStoryActive","buttonRow","icon","popconfirm","onConfirm","placement","Boolean","list","style","backgroundColor","padding","Meta","description","ItemEdit","onUpdateStory","_useTextField","_useTextField2","newTitle","setTitle","_useTextField3","_useTextField4","newDescription","setDescription","es_form","onSubmit","e","preventDefault","input","placeholder","onChange","TextArea","es_button","htmlType","StoriesContext","stories","addStories","Promise","resolve","updateStory","removeStory","StoriesProvider","setStories","useAsyncEffect","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","ApiClient","get","sent","stop","setUpdatedStoryToStore","updatedStory","prevStories","removeStoryFromState","emitSocket","add-story","newStories","update-story","remove-story","_ref7","_callee2","storiesTitles","_ref8","_context2","active","post","_x","_ref9","_callee3","_ref10","_context3","put","_x2","_ref11","_callee4","_ref12","_context4","delete","params","t0","message","error","_x3","withRouter","props","editMode","setEditMode","partialStory","Item_Item","Wrapper","atoms_templateObject","Panel","atoms_templateObject2","FormWrapper","atoms_templateObject3","showTotalScore","Report","game","onClose","index","modal","visible","footer","onCancel","width","match","reportVisibilityStatus","setReportVisibilityStatus","useCurrentGame","gameID","Component_Report","separateStoriesByActivity","partition","StyledList","List","List_templateObject","StoriesPane","admin","itemLayout","renderItem","Stories_StoryItem","StoryList","_separateStoriesByAct","_separateStoriesByAct2","unplayedStories","playedStories","extra","Container","tabs","defaultActiveKey","TabPane","tab","List_StoriesPane","StoriesForm","mode","toggleMode","handleSubmit","onKeyPress","charCode","allTasks","item","split","StoriesContainer","isAddingStoryMode","setMode","List_StoryList","TemporaryLoginForm","replace","history","setLogin","gender","setGender","setTempUser","onOk","event","label","labelCol","span","wrapperCol","es_switch","checked","switchValue","checkedChildren","unCheckedChildren","UserList","ul","Player_atoms_templateObject","UserItem","li","Player_atoms_templateObject2","UserAvatar","Player_atoms_templateObject3","avatar","UserDefaultAvatar","atoms_templateObject4","floor","UserName","atoms_templateObject5","UserScore","atoms_templateObject6","PlayerComponent","_user$info","PlayersList","Player_PlayerComponent","GridWrapper","section","Board_atoms_templateObject","GridHeader","header","Board_atoms_templateObject2","GridStories","Board_atoms_templateObject3","GridPlayers","Board_atoms_templateObject4","GridDeck","Board_atoms_templateObject5","InputGroup","Chat_atoms_templateObject","ChatButton","Badge","Chat_atoms_templateObject2","ChatInputArea","onSendMessage","shape","flexShrink","marginLeft","ChatMessage","src","ChatThread","threads","renderRow","ChatMessage_ChatMessage","getRowHeight","messageLength","flexGrow","es","height","rowCount","rowHeight","rowRenderer","scrollToIndex","Chat","messages","addMessage","_useState3","_useState4","isOpened","setOpen","_useState5","_useState6","unreadMessages","setUnreadMessages","addMessageToStore","prevMessages","toConsumableArray","emitMessage","message-received","count","size","drawer","closable","mask","display","flexDirection","ChatThread_ChatThread","newMessage","ActionButtons","_useContext2","storiesActions","activeStory","find","resetCurrentStory","tooltip","BoardContainer","updateGame","GamesContext","_useContext3","currentGameId","checkIsAdmin","StoriesContext_StoriesProvider","Container_StoriesContainer","PlayersList_PlayersList","ActionButtons_ActionButtons","BranchBoard","LOGIN_STATUS","LOGGED_IN","TEMP_USER","includes","loginStatus","PlayRoomContext_PlayRoomProvider","Board_BoardContainer","TemporaryLoginForm_TemporaryLoginForm"],"mappings":"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","file":"static/js/3.b5bd4267.chunk.js","sourcesContent":["import { useState, ChangeEvent } from 'react';\n\ntype InputElements = HTMLInputElement | HTMLTextAreaElement;\n\ninterface UseTextFieldHandler<T> {\n    (inputValue: ChangeEvent<T>): void;\n}\n\nexport const useTextField = <T extends InputElements>(initialValue: string): [string, UseTextFieldHandler<T>] => {\n    const [value, setValue] = useState(initialValue);\n    const handler: UseTextFieldHandler<T> = inputValue => {\n        const valueToSet = inputValue ? inputValue.target.value : '';\n        setValue(valueToSet);\n    };\n    return [value, handler];\n};\n","import styled from 'styled-components';\n\nexport const FloatButtonsContainer = styled.div`\n    position: fixed;\n    right: 2rem;\n    bottom: 2rem;\n    display: flex;\n    flex-direction: column;\n\n    & > * {\n        margin: 0.5rem 0rem;\n    }\n`;\n","import styled from 'styled-components';\n\ntype CardProps = { cardPicked: boolean };\n\nexport const CardListContainer = styled.div`\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    grid-gap: 0.6rem;\n    background-color: #fff;\n    padding: 0.6rem;\n`;\n\nexport const CardContainer = styled('div')<CardProps>`\n    border: 1px solid #e8e8e8;\n    box-sizing: border-box;\n    margin: 0 0.2rem !important;\n    padding-top: 125%;\n    box-shadow: ${({ cardPicked }) => (cardPicked ? '0px 4px 12px rgba(25, 88, 203, 0.27)' : '')};\n    transform: translateY(${({ cardPicked }) => (cardPicked ? '-2rem' : 0)});\n    cursor: pointer;\n    background-color: #fff;\n    position: relative;\n`;\n\nexport const CardTopLeftCaption = styled.div`\n    font-size: 1.3rem;\n    line-height: 2rem;\n`;\n\nexport const CardBottomRightCaption = styled.div`\n    text-align: right;\n    line-height: 2rem;\n    font-size: 1.3rem;\n`;\n\nexport const CardCenterCaption = styled.div`\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    font-size: 2rem;\n    & span.fa {\n        font-size: 1rem;\n    }\n    & > span.userName {\n        font-size: 1rem;\n    }\n`;\n\nexport const CardInnerContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    padding: 0.6rem 1rem;\n`;\n","import openSocket from 'socket.io-client';\nexport const socket = openSocket(process.env.REACT_APP_API_ENDPOINT);\n","import { useEffect } from 'react';\nimport { socket } from '../../Data/socket';\n\nexport const useSocket = <T extends object>(types: T) => {\n    useEffect(() => {\n        for (let [type, cb] of Object.entries(types)) {\n            socket.on(type, cb);\n        }\n        return () => {\n            for (let [type, cb] of Object.entries(types)) {\n                socket.removeEventListener(type, cb);\n            }\n        };\n    }, []);\n    return (type: string, data: unknown) => {\n        socket.emit(type, data);\n    };\n};\n","import * as React from 'react';\nimport { useSocket } from '../../utils/hooks/useSocket';\nimport { Score } from '../../Pages/Board/Components/Deck/deck';\n\nexport type Player = {\n    id: string;\n    info: {\n        picture: string | number;\n        login: string;\n    };\n    score: Score;\n};\n\ninterface PlayRoomState {\n    players: Player[];\n    isPlaying: boolean;\n    isRevealing: boolean;\n    currentStory: null | string;\n}\n\ninterface Action<T> {\n    (value: T): void;\n}\n\ninterface PlayRoom extends PlayRoomState {\n    isCompleted: boolean;\n    actions: {\n        enterRoom: Action<Player>;\n        leaveRoom: Action<any>;\n        setStory: Action<string | null>;\n        startPlayRound: Action<any>;\n        showPlayedCards: Action<any>;\n        setPlayerScore: Action<Player>;\n    };\n}\n\nconst initialState: PlayRoomState = {\n    players: [],\n    isPlaying: false,\n    isRevealing: false,\n    currentStory: null,\n};\n\nexport const PlayRoomContext = React.createContext<PlayRoom>({\n    ...initialState,\n    isCompleted: false,\n    actions: {\n        enterRoom: () => {},\n        leaveRoom: () => {},\n        setStory: () => {},\n        startPlayRound: () => {},\n        showPlayedCards: () => {},\n        setPlayerScore: () => {},\n    },\n});\n\ntype SocketListeners = {\n    'append-user': (value: { newPlayer: Player }) => void;\n    'self-append-user': (value: { newPlayer: Player }) => void;\n    'apply-play-room-patch': (value: { patch: Partial<PlayRoomState> }) => void;\n    'user-left': (value: { userId: string }) => void;\n};\n\ntype Props = {\n    gameId: string;\n    isAdmin: boolean;\n};\n\nconst resetPlayersScores = (users: Player[]): Player[] => {\n    return users.map(user => ({ ...user, score: null }));\n};\n\nexport const PlayRoomProvider: React.SFC<Props> = ({ children, gameId, isAdmin }) => {\n    const [gameStatus, setGameStatus] = React.useState(initialState);\n    const emitSocket2 = useSocket<SocketListeners>({\n        'self-append-user': ({ newPlayer }) => {\n            setGameStatus(prevState => {\n                const newScores = prevState.players.map(playerScore =>\n                    playerScore.id.startsWith('temp__') && playerScore.info.login === newPlayer.info.login\n                        ? newPlayer\n                        : playerScore,\n                );\n                return {\n                    ...prevState,\n                    players: newScores,\n                };\n            });\n        },\n        'append-user': ({ newPlayer }) => {\n            setGameStatus(prevState => {\n                const newScores = prevState.players.concat(newPlayer);\n                if (isAdmin) {\n                    emitPatch({ players: newScores });\n                }\n                return { ...prevState, players: newScores };\n            });\n        },\n        'apply-play-room-patch': ({ patch }) => {\n            setGameStatus(prevState => ({ ...prevState, ...patch }));\n        },\n        'user-left': ({ userId }) => {\n            setGameStatus(prevState => ({\n                ...prevState,\n                players: prevState.players.filter(player => player.id !== userId),\n            }));\n        },\n    });\n\n    const enterRoom: Action<Player> = user => {\n        const newPlayer: Player = { ...user, score: null, id: `temp__${Math.random() * 100}` };\n        setGameStatus(prevState => {\n            return {\n                ...prevState,\n                players: prevState.players.concat(newPlayer),\n            };\n        });\n        emitSocket2('enter-room', { gameId, newPlayer });\n    };\n\n    const leaveRoom: Action<any> = () => {\n        emitSocket2('leave-room', { gameId });\n    };\n\n    const emitPatch = (patch: Partial<PlayRoomState>): Partial<PlayRoomState> => {\n        emitSocket2('emit-play-room-patch', { gameId, patch });\n        return patch;\n    };\n\n    const setAndEmitPatch = (cb: (prevState: PlayRoomState) => Partial<PlayRoomState>) => {\n        setGameStatus(prevState => {\n            return {\n                ...prevState,\n                ...emitPatch(cb(prevState)),\n            };\n        });\n    };\n\n    const setStory: Action<string | null> = storyId => {\n        setAndEmitPatch(prevState => ({\n            isPlaying: false,\n            isRevealing: false,\n            currentStory: storyId,\n            players: resetPlayersScores(prevState.players),\n        }));\n    };\n\n    const startPlayRound: Action<any> = () => {\n        setAndEmitPatch(prevState => ({\n            isPlaying: true,\n            isRevealing: false,\n            players: resetPlayersScores(prevState.players),\n        }));\n    };\n\n    const showPlayedCards: Action<any> = () => {\n        setAndEmitPatch(() => ({\n            isPlaying: false,\n            isRevealing: true,\n        }));\n    };\n\n    const setPlayerScore: Action<Player> = playerScore => {\n        setAndEmitPatch(prevState => ({\n            players: prevState.players.map(player =>\n                player.info.login === playerScore.info.login ? playerScore : player,\n            ),\n        }));\n    };\n\n    const isCompleted = gameStatus.players.every(player => player.score !== null);\n    // TODO: memoize provider value to fix unneeded re-renders\n    return (\n        <PlayRoomContext.Provider\n            value={{\n                ...gameStatus,\n                isCompleted,\n                actions: { enterRoom, setStory, startPlayRound, showPlayedCards, setPlayerScore, leaveRoom },\n            }}\n        >\n            {children}\n        </PlayRoomContext.Provider>\n    );\n};\n","type StringScore = 'coffee' | 'question' | '\\u221e';\nexport type Score = number | StringScore | null;\n\nexport type DeckCard = {\n    value: Score;\n};\n\nexport const DECK: DeckCard[] = [\n    { value: 1 },\n    { value: 2 },\n    { value: 3 },\n    { value: 5 },\n    { value: 8 },\n    { value: 13 },\n    { value: 21 },\n    { value: 34 },\n    { value: 55 },\n    { value: 89 },\n    { value: 'question' },\n    { value: '\\u221e' },\n    { value: 'coffee' },\n];\n\nconst StringScoreMap = {\n    coffee: 100,\n    question: 200,\n    '\\u221e': 300,\n};\n\nconst numberComparator = (a: number, b: number): 1 | -1 | 0 => {\n    return Math.max(Math.min(1, a - b), -1) as 1 | -1 | 0;\n};\n\nexport const comparator = (a: Score, b: Score): 1 | -1 | 0 => {\n    if (a === null) {\n        return -1;\n    }\n    if (b === null) {\n        return 1;\n    }\n    const aValue = typeof a === 'number' ? a : StringScoreMap[a];\n    const bValue = typeof b === 'number' ? b : StringScoreMap[b];\n    return numberComparator(aValue, bValue);\n};\n","import * as React from 'react';\n\nimport * as Atoms from './atoms';\nimport { Score } from './deck';\n\ntype Props = {\n    value: Score;\n    cardPicked: boolean;\n    onClick: (value: Score) => void;\n};\n\nexport const Card: React.SFC<Props> = ({ value, onClick = () => {}, cardPicked }) => {\n    const displayedValue: string | JSX.Element =\n        typeof value === 'string' ? (\n            /^\\w/.test(value) ? (\n                <span className={`fa fa-${value}`} />\n            ) : (\n                value\n            )\n        ) : value === null ? (\n            ''\n        ) : (\n            value.toString()\n        );\n    return (\n        <Atoms.CardContainer onClick={() => onClick(value)} cardPicked={cardPicked}>\n            <Atoms.CardInnerContainer>\n                <Atoms.CardTopLeftCaption>{displayedValue}</Atoms.CardTopLeftCaption>\n                <Atoms.CardCenterCaption>\n                    <span>{displayedValue}</span>\n                </Atoms.CardCenterCaption>\n                <Atoms.CardBottomRightCaption>{displayedValue}</Atoms.CardBottomRightCaption>\n            </Atoms.CardInnerContainer>\n        </Atoms.CardContainer>\n    );\n};\n","import React, { useState, useContext } from 'react';\n\nimport * as Atoms from './atoms';\n\nimport { AuthContext } from '../../../../Data/Auth/AuthContext';\nimport { PlayRoomContext } from '../../../../Data/PlaySession/PlayRoomContext';\nimport { Score, DECK } from './deck';\nimport { Card } from './Card';\n\ntype TempUser = {\n    user: {\n        info: {\n            name: string;\n            picture: string;\n        };\n    };\n};\n\nexport function DeckContainer() {\n    const { user } = useContext(AuthContext) as TempUser;\n    const { actions } = useContext(PlayRoomContext);\n    const [myScore, setMyScore] = useState<Score | null>(null);\n    const handleCardPick = (score: Score) => {\n        setMyScore(score);\n        actions.setPlayerScore({\n            info: {\n                login: user.info.name,\n                picture: user.info.picture,\n            },\n            score,\n            id: `temp__${Math.random() * 100}`,\n        });\n    };\n    return (\n        <Atoms.CardListContainer>\n            {DECK.map((card, id) => (\n                <Card key={`card${id}`} cardPicked={card.value === myScore} {...card} onClick={handleCardPick} />\n            ))}\n        </Atoms.CardListContainer>\n    );\n}\n","import compose from 'ramda/src/compose';\nimport converge from 'ramda/src/converge';\nimport map from 'ramda/src/map';\nimport pluck from 'ramda/src/pluck';\nimport sum from 'ramda/src/sum';\nimport length from 'ramda/src/length';\nimport divide from 'ramda/src/divide';\nimport ifElse from 'ramda/src/ifElse';\nimport is from 'ramda/src/is';\nimport cond from 'ramda/src/cond';\nimport contains from 'ramda/src/contains';\nimport always from 'ramda/src/always';\nimport groupBy from 'ramda/src/groupBy';\nimport prop from 'ramda/src/prop';\nimport isNil from 'ramda/src/isNil';\nimport T from 'ramda/src/T';\n\nconst goldenRatio = (1 + Math.sqrt(5)) / 2;\n\nconst log = (a, b) => Math.log(b) / Math.log(a);\n\nconst findFibonacciOrdinal = value => Math.round(log(goldenRatio, Math.sqrt(5) * value));\n\nconst findByOrdinal = n => Math.round((Math.pow(goldenRatio, n) - Math.pow(-goldenRatio, -n)) / (2 * goldenRatio - 1));\n\nconst average = converge(divide, [sum, length]);\n\nconst getRoundedAverage = compose(\n    Math.ceil,\n    average,\n);\n\nconst calculateAverageForNumbers = compose(\n    findByOrdinal,\n    getRoundedAverage,\n    map(findFibonacciOrdinal),\n);\n\nconst extractScores = pluck('score');\n\nconst divideScoresByType = groupBy(ifElse(is(String), always('string'), always('number')));\n\nconst calculateStringAnswer = cond([\n    [contains('coffee'), always('Coffee break')],\n    [contains('question'), always('Unclear')],\n    [contains('\\u221e'), always('Infinity')],\n    [T, always('Unclear')],\n]);\n\nconst calculationCondition = ifElse(\n    compose(\n        isNil,\n        prop('string'),\n    ),\n    compose(\n        calculateAverageForNumbers,\n        prop('number'),\n    ),\n    compose(\n        calculateStringAnswer,\n        prop('string'),\n    ),\n);\n\nexport const calculateAverage = compose(\n    calculationCondition,\n    divideScoresByType,\n    extractScores,\n);\n","import React from 'react';\nimport { Player } from '../../../../Data/PlaySession/PlayRoomContext';\nimport { Table } from 'antd';\nimport { comparator } from '../Deck/deck';\nimport { ColumnProps } from 'antd/lib/table';\n\ntype Props = {\n    players: Player[];\n};\nconst columns: ColumnProps<Player>[] = [\n    {\n        title: 'Player',\n        dataIndex: 'info.login',\n        sorter: (a: Player, b: Player) => a.info.login.localeCompare(b.info.login),\n    },\n    {\n        title: 'Story Points',\n        dataIndex: 'score',\n        defaultSortOrder: 'ascend',\n        sorter: (a: Player, b: Player) => comparator(a.score, b.score),\n    },\n];\nexport const TableResult: React.SFC<Props> = ({ players }) => {\n    return (\n        <div>\n            <Table dataSource={players} columns={columns} pagination={false} />\n        </div>\n    );\n};\n","import React, { useContext } from 'react';\nimport { Divider } from 'antd';\n\nimport { PlayRoomContext } from '../../../../Data/PlaySession/PlayRoomContext';\nimport { calculateAverage } from '../../../../utils/average.score';\nimport { TableResult } from '../RoundResults/TableResult';\n\nexport function TableContainer() {\n    const { isRevealing, players, currentStory } = useContext(PlayRoomContext);\n\n    if (currentStory === '' || currentStory === null || !isRevealing) return null;\n    return (\n        <>\n            <Divider>Average Score is {calculateAverage(players)}</Divider>\n            <TableResult players={players} />\n        </>\n    );\n}\n","import React, { useContext } from 'react';\nimport { List, Icon, Popconfirm } from 'antd';\nimport { PlayRoomContext } from '../../../../Data/PlaySession/PlayRoomContext';\nimport { Story, StoryId } from './story.type';\n\ntype Props = {\n    story: Story;\n    onSetEditMode: (value: boolean) => void;\n    deleteStory: (id: StoryId) => void;\n    isAdmin: boolean;\n};\n\nexport const Item: React.SFC<Props> = ({ story, onSetEditMode, deleteStory, isAdmin }) => {\n    const { currentStory, actions } = useContext(PlayRoomContext);\n    const isStoryActive = story.id === currentStory;\n\n    const buttonRow = !isAdmin\n        ? []\n        : [\n              isStoryActive ? null : <Icon type=\"star\" onClick={() => actions.setStory(story.id)} />,\n              isStoryActive ? null : (\n                  <Popconfirm\n                      title=\"Are you sure you want to delete the story?\"\n                      onConfirm={() => deleteStory(story.id)}\n                      placement=\"topRight\"\n                  >\n                      <Icon type=\"delete\" />\n                  </Popconfirm>\n              ),\n              <Icon type=\"edit\" onClick={() => onSetEditMode(true)} />,\n          ].filter(Boolean);\n\n    return (\n        <List.Item\n            actions={buttonRow}\n            style={{\n                backgroundColor: isStoryActive ? '#e6f7fe' : '#fff',\n                padding: '.4rem',\n            }}\n        >\n            <List.Item.Meta\n                title={`${story.title} ${story.score !== 0 ? ` - ${story.score} sp` : ''}`}\n                description={story.description}\n            />\n        </List.Item>\n    );\n};\n","import React from 'react';\nimport { Input, Button, Form } from 'antd';\n\nimport './styles.css';\nimport { useTextField } from '../../../../utils/hooks/useTextField';\n\nexport function ItemEdit({ story, onUpdateStory, onSetEditMode }) {\n    const [newTitle, setTitle] = useTextField(story.title || '');\n    const [newDescription, setDescription] = useTextField(story.description || '');\n\n    const saveItem = e => {\n        e.preventDefault();\n        onUpdateStory({\n            title: newTitle,\n            description: newDescription,\n        });\n        onSetEditMode(false);\n    };\n\n    return (\n        <Form onSubmit={saveItem}>\n            <header className=\"Stories-storyHeader\">\n                <Input placeholder=\"title of the story\" value={newTitle} onChange={setTitle} />\n            </header>\n            <div className=\"Stories-storyDescription\">\n                <Input.TextArea placeholder=\"Description\" value={newDescription} onChange={setDescription} />\n            </div>\n            <footer className=\"Stories-storyFooter\">\n                <Button onClick={() => onSetEditMode(false)}>Cancel</Button>\n                <Button htmlType=\"submit\" type=\"primary\">\n                    Save\n                </Button>\n            </footer>\n        </Form>\n    );\n}\n","import * as React from 'react';\n\nimport { message } from 'antd';\nimport { useAsyncEffect } from '../../utils/hooks/useAsyncEffect';\nimport { ApiClient } from '../../utils/api/api-client';\nimport { useSocket } from '../../utils/hooks/useSocket';\n\ntype Story = {\n    id: string;\n    description: string;\n    score: number | string;\n    title: string;\n};\n\ntype ContextState = {\n    stories: Story[];\n    actions: {\n        addStories: (title: Array<{ title: string }>) => Promise<void>;\n        updateStory: (story: Story) => Promise<void>;\n        removeStory: (storyId: string) => Promise<void>;\n    };\n};\nexport const StoriesContext = React.createContext<ContextState>({\n    stories: [],\n    actions: {\n        addStories: () => Promise.resolve(),\n        updateStory: () => Promise.resolve(),\n        removeStory: () => Promise.resolve(),\n    },\n});\n\ntype Props = {\n    gameId: string;\n};\n\ntype SocketListeners = {\n    'add-story': (data: { stories: Story[] }) => void;\n    'update-story': (data: { story: Story }) => void;\n    'remove-story': (data: { id: string }) => void;\n};\n\nexport const StoriesProvider: React.SFC<Props> = ({ children, gameId }) => {\n    const [stories, setStories] = React.useState<Story[]>([]);\n    useAsyncEffect(\n        async () => {\n            const { data } = await ApiClient.get<{ stories: Story[] }>(`/api/game/${gameId}`);\n            setStories(data.stories || []);\n        },\n        [gameId],\n    );\n\n    const setUpdatedStoryToStore = (updatedStory: Story): void => {\n        setStories(prevStories =>\n            prevStories.map(story => {\n                if (story.id === updatedStory.id) {\n                    return { ...story, ...updatedStory };\n                }\n                return story;\n            }),\n        );\n    };\n\n    const removeStoryFromState = (id: string) => {\n        setStories(prevStories => prevStories.filter(story => story.id !== id));\n    };\n\n    const emitSocket = useSocket<SocketListeners>({\n        'add-story': ({ stories: newStories }) => {\n            setStories(prevState => prevState.concat(newStories));\n        },\n        'update-story': ({ story }) => {\n            setUpdatedStoryToStore(story);\n        },\n        'remove-story': ({ id }) => {\n            removeStoryFromState(id);\n        },\n    });\n\n    const addStories = async (storiesTitles: Array<{ title: string }>) => {\n        const stories: Partial<Story>[] = storiesTitles.map(story => ({\n            description: '',\n            active: false,\n            score: 0,\n            ...story,\n        }));\n        type RequestStoryAddType = { stories: Partial<Story>[]; gameId: string };\n        const { data } = await ApiClient.post<RequestStoryAddType, Story[]>('/api/story', {\n            stories,\n            gameId,\n        });\n        setStories(prevStories => prevStories.concat(data));\n        emitSocket('emit-add-story', { stories: data });\n    };\n\n    const updateStory = async (story: Story) => {\n        const { data } = await ApiClient.put<Story, Story>('/api/story', story);\n        setUpdatedStoryToStore(data);\n        emitSocket('emit-update-story', { story: data });\n    };\n\n    const removeStory = async (storyId: string) => {\n        try {\n            const { data } = await ApiClient.delete<{ id: string }>('/api/story', { params: { storyId } });\n            removeStoryFromState(data.id);\n            emitSocket('emit-remove-story', data);\n        } catch (error) {\n            message.error(error.message);\n        }\n    };\n    return (\n        <StoriesContext.Provider value={{ stories, actions: { addStories, updateStory, removeStory } }}>\n            {children}\n        </StoriesContext.Provider>\n    );\n};\n","import React, { useState, useContext } from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\n\nimport { Item } from './Item';\nimport { ItemEdit } from './Item.form';\nimport { StoriesContext } from '../../../../Data/Stories/StoriesContext';\nimport { Story } from './story.type';\n\ntype OwnProps = {\n    isAdmin: boolean;\n    story: Story;\n};\n\ntype Props = RouteComponentProps & OwnProps;\n\nconst StoryItem: React.SFC<Props> = props => {\n    const [editMode, setEditMode] = useState(false);\n    const { actions } = useContext(StoriesContext);\n    const onUpdateStory = (partialStory: Partial<Story>) => {\n        actions.updateStory({ ...props.story, ...partialStory });\n    };\n\n    return editMode ? (\n        <ItemEdit {...props} onUpdateStory={onUpdateStory} onSetEditMode={setEditMode} />\n    ) : (\n        <Item\n            story={props.story}\n            onSetEditMode={setEditMode}\n            isAdmin={props.isAdmin}\n            deleteStory={actions.removeStory}\n        />\n    );\n};\n\nexport default withRouter(StoryItem);\n","import styled from 'styled-components';\nimport { Card } from 'antd';\n\nconst Wrapper = styled(Card)`\n    width: 100%;\n`;\n\nconst Panel = styled.div`\n    display: flex;\n    flex-direction: column;\n`;\n\nconst FormWrapper = styled.div`\n    margin: 1rem 0;\n`;\n\nexport { Wrapper, Panel, FormWrapper };\n","import React from 'react';\nimport compose from 'ramda/src/compose';\nimport pluck from 'ramda/src/pluck';\nimport sum from 'ramda/src/sum';\nimport { Modal, Button, Table } from 'antd';\n\nconst showTotalScore = compose(\n    sum,\n    pluck('score'),\n);\n\nexport const Report = ({ game, stories, onClose }) => {\n    const columns = [\n        {\n            title: 'Story Tile',\n            dataIndex: 'title',\n            sorter: (a, b) => a.title.localeCompare(b.title),\n        },\n        {\n            title: 'Description',\n            dataIndex: 'description',\n        },\n        {\n            title: 'Story Points',\n            dataIndex: 'score',\n            defaultSortOrder: 'descend',\n            sorter: (a, b) => a.score - b.score,\n        },\n    ];\n    const dataSource = stories.map((story, index) => ({ ...story, key: index }));\n\n    return (\n        <Modal\n            visible={true}\n            title={`Report for \"${game.title}\"`}\n            footer={[\n                <Button onClick={onClose} key=\"ok-button\">\n                    Ok\n                </Button>,\n            ]}\n            onCancel={onClose}\n            width=\"800px\"\n        >\n            <Table\n                dataSource={dataSource}\n                columns={columns}\n                title={() => `Total Score ${showTotalScore(stories)}`}\n                footer={() => `Report generated By FreePlanningPoker`}\n            />\n        </Modal>\n    );\n};\n","import React, { useState, useContext } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nimport { Report } from './Component';\nimport { useCurrentGame } from '../../../../Data/Games/GamesContext';\nimport { Icon } from 'antd';\nimport { StoriesContext } from '../../../../Data/Stories/StoriesContext';\n\nexport function ReportContainer({ match: { params } }) {\n    const [reportVisibilityStatus, setReportVisibilityStatus] = useState(false);\n    const { stories } = useContext(StoriesContext);\n    const game = useCurrentGame(params.gameID);\n\n    const prepareReport = () => setReportVisibilityStatus(true);\n    const closeReport = () => setReportVisibilityStatus(false);\n\n    return (\n        <>\n            <Icon type=\"printer\" onClick={prepareReport} />\n            {reportVisibilityStatus ? <Report game={game} stories={stories} onClose={closeReport} /> : null}\n        </>\n    );\n}\n\nexport default withRouter(ReportContainer);\n","import React from 'react';\nimport { Tabs, List } from 'antd';\nimport partition from 'ramda/src/partition';\nimport length from 'ramda/src/length';\nimport styled from 'styled-components';\n\nimport StoryItem from './StoryItem';\nimport './styles.css';\nimport { Wrapper } from './atoms';\nimport ReportContainer from '../Report/Container';\n\nconst separateStoriesByActivity = partition(story => story.score === 0);\n\nconst StyledList = styled(List)`\n    height: 370px;\n    overflow: scroll;\n`;\n\nconst StoriesPane = ({ stories, admin }) =>\n    length(stories) === 0 ? (\n        <span>No stories</span>\n    ) : (\n        <StyledList\n            itemLayout=\"vertical\"\n            dataSource={stories}\n            renderItem={story => <StoryItem isAdmin={admin} key={story.id} story={story} />}\n        />\n    );\n\nexport const StoryList = ({ stories, admin }) => {\n    const [unplayedStories, playedStories] = separateStoriesByActivity(stories);\n\n    return (\n        <Wrapper title=\"Stories\" extra={length(unplayedStories) === 0 ? <ReportContainer /> : null}>\n            <Tabs defaultActiveKey=\"1\">\n                <Tabs.TabPane tab=\"Remaining\" key=\"1\">\n                    <StoriesPane stories={unplayedStories} admin={admin} />\n                </Tabs.TabPane>\n                <Tabs.TabPane tab=\"Played\" key=\"2\">\n                    <StoriesPane stories={playedStories} admin={admin} />\n                </Tabs.TabPane>\n            </Tabs>\n        </Wrapper>\n    );\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport split from 'ramda/src/split';\nimport map from 'ramda/src/map';\nimport { Button, Input } from 'antd';\nimport { FormWrapper } from './atoms';\nimport { useTextField } from '../../../../utils/hooks/useTextField';\n\nexport function StoriesForm({ mode, toggleMode, isAdmin, handleSubmit }) {\n    const [value, setValue] = useTextField('');\n\n    const handleToggleMode = () => toggleMode(!mode);\n\n    const handleKeyPress = ({ charCode }) => {\n        if (charCode !== 13) {\n            return;\n        }\n        const allTasks = map(item => ({ title: item }), split('\\n', value));\n        handleSubmit(allTasks);\n        toggleMode(mode);\n        setValue();\n    };\n\n    if (!isAdmin) {\n        return null;\n    }\n    return (\n        <FormWrapper>\n            {mode ? (\n                <Input.TextArea\n                    placeholder=\"Story title\"\n                    value={value}\n                    onKeyPress={handleKeyPress}\n                    onChange={setValue}\n                />\n            ) : (\n                <Button onClick={handleToggleMode}>Add new Story</Button>\n            )}\n        </FormWrapper>\n    );\n}\n\nStoriesForm.propTypes = {\n    mode: PropTypes.bool.isRequired,\n    isAdmin: PropTypes.bool.isRequired,\n    toggleMode: PropTypes.func.isRequired,\n    handleSubmit: PropTypes.func.isRequired,\n};\n","import React, { useState, useContext } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nimport { StoryList } from './List';\nimport './styles.css';\nimport { Panel } from './atoms';\nimport { StoriesForm } from './Form';\nimport { StoriesContext } from '../../../../Data/Stories/StoriesContext';\n\nexport const StoriesContainer = withRouter(function StoriesContainer({ admin, match: { params } }) {\n    const [isAddingStoryMode, setMode] = useState(false);\n    const { stories, actions } = useContext(StoriesContext);\n\n    return (\n        <Panel>\n            <StoryList stories={stories} admin={admin} />\n            <StoriesForm\n                handleSubmit={actions.addStories}\n                toggleMode={setMode}\n                isAdmin={admin}\n                mode={isAddingStoryMode}\n            />\n        </Panel>\n    );\n});\n","import React, { useContext, useState } from 'react';\nimport { Modal, Input, Form, Switch, Icon } from 'antd';\nimport { useTextField } from '../../../../utils/hooks/useTextField';\nimport { AuthContext } from '../../../../Data/Auth/AuthContext';\n\nexport const TemporaryLoginForm = ({ history: { replace } }) => {\n    const [login, setLogin] = useTextField('');\n    const [gender, setGender] = useState('male');\n    const { setTempUser } = useContext(AuthContext);\n\n    const onSubmit = event => {\n        event.preventDefault();\n        setTempUser(login, gender);\n    };\n    const handleChange = switchValue => setGender(switchValue ? 'female' : 'male');\n    return (\n        <div>\n            <Modal visible={true} title=\"Sit a game in progress\" onCancel={() => replace('/')} onOk={onSubmit}>\n                <Form.Item label=\"Login\" labelCol={{ span: 6 }} wrapperCol={{ span: 14 }}>\n                    <Input id=\"login\" name=\"login\" placeholder=\"Your desired login\" value={login} onChange={setLogin} />\n                </Form.Item>\n                <Form.Item label=\"Gender\" labelCol={{ span: 6 }} wrapperCol={{ span: 14 }}>\n                    <Switch\n                        checked={gender === 'female'}\n                        onChange={handleChange}\n                        checkedChildren={<Icon type=\"man\" />}\n                        unCheckedChildren={<Icon type=\"woman\" />}\n                    />\n                </Form.Item>\n            </Modal>\n        </div>\n    );\n};\n","import styled from 'styled-components';\n\nexport const UserList = styled.ul`\n    list-style-type: none;\n    padding: 1rem;\n    background-color: #fff;\n    display: flex;\n    flex-wrap: wrap;\n`;\nexport const UserItem = styled.li`\n    padding: 0.8rem;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    position: relative;\n`;\nexport const UserAvatar = styled('div')<{ avatar: string }>`\n    width: 6.6rem;\n    height: 6.6rem;\n    background-image: url(${({ avatar }) => avatar});\n    background-size: contain;\n    border-radius: 50%;\n`;\n\nexport const UserDefaultAvatar = styled('div')<{ avatar: number }>`\n    width: 6.6rem;\n    height: 6.6rem;\n    background-image: url(/assets/avatars.jpg);\n    background-position-y: ${({ avatar }) => `-${55 + Math.floor(avatar / 6) * 130}px`};\n    background-position-x: ${({ avatar }) => `-${15 + ((avatar + 6) % 6) * 95}px`};\n    background-size: 600px;\n`;\nexport const UserName = styled.div`\n    text-align: center;\n`;\n\nexport const UserScore = styled.div`\n    position: absolute;\n    left: calc(50% + 2rem);\n    top: 0.5rem;\n    width: 2rem;\n    height: 2rem;\n    background-color: #52c41a;\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n`;\n","import * as React from 'react';\nimport * as Atoms from './atoms';\nimport { PlayRoomContext, Player } from '../../../../Data/PlaySession/PlayRoomContext';\n\ntype Props = {\n    user: Player;\n};\n\nconst renderScore = (score: string | number, shouldShowScore: boolean): string => {\n    if (!shouldShowScore) {\n        return '?';\n    }\n    if (typeof score === 'number') {\n        return score.toString();\n    }\n    return score[0];\n};\n\nexport const PlayerComponent: React.SFC<Props> = ({ user }) => {\n    const { isRevealing } = React.useContext(PlayRoomContext);\n    const { picture, login } = user.info;\n    return (\n        <Atoms.UserItem>\n            {typeof picture === 'number' ? (\n                <Atoms.UserDefaultAvatar avatar={picture} />\n            ) : (\n                <Atoms.UserAvatar avatar={picture} />\n            )}\n            <Atoms.UserName>{login}</Atoms.UserName>\n            {user.score !== null ? <Atoms.UserScore>{renderScore(user.score, isRevealing)}</Atoms.UserScore> : null}\n        </Atoms.UserItem>\n    );\n};\n","import * as React from 'react';\nimport * as Atoms from './atoms';\nimport { PlayRoomContext } from '../../../../Data/PlaySession/PlayRoomContext';\nimport { PlayerComponent } from './Player';\n\nexport const PlayersList: React.SFC<{}> = () => {\n    const { players } = React.useContext(PlayRoomContext);\n    return (\n        <Atoms.UserList>\n            {players.map((player, index) => (\n                <PlayerComponent key={index} user={player} />\n            ))}\n        </Atoms.UserList>\n    );\n};\n","import styled from 'styled-components';\nexport const GridWrapper = styled.section`\n    display: grid;\n    padding: 1rem;\n    width: 100%;\n    height: 100%;\n    grid-gap: 2rem;\n    grid-template-columns: 20rem 1fr;\n    grid-template-rows: 2rem max-content auto;\n`;\n\nexport const GridHeader = styled.header`\n    grid-column: 1 / span 2;\n`;\n\nexport const GridStories = styled.section`\n    grid-row: 2 / span 2;\n`;\n\nexport const GridPlayers = styled.section`\n    grid-row: 2 / span 1;\n`;\n\nexport const GridDeck = styled.section`\n    grid-row: 3 / span 1;\n`;\n","import styled from 'styled-components';\nimport { Badge } from 'antd';\n\nexport const InputGroup = styled.div`\n    display: flex;\n    justify-content: space-between;\n`;\n\nexport const ChatButton = styled(Badge)``;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Divider, Button, Input } from 'antd';\nimport { InputGroup } from './atoms';\nimport { useTextField } from '../../../../utils/hooks/useTextField';\n\nexport function ChatInputArea({ onSendMessage }) {\n    const [value, setValue] = useTextField('');\n\n    const handleSubmit = () => {\n        if (value === '') return;\n        onSendMessage(value);\n        setValue();\n    };\n\n    const handleKeyDown = event => {\n        if (event.charCode === 13) {\n            return handleSubmit();\n        }\n    };\n\n    return (\n        <>\n            <Divider />\n            <InputGroup>\n                <Input name=\"chat\" onKeyPress={handleKeyDown} value={value} onChange={setValue} />\n                <Button\n                    type=\"primary\"\n                    shape=\"circle\"\n                    icon=\"enter\"\n                    onClick={handleSubmit}\n                    style={{ flexShrink: 0, marginLeft: '0.6rem' }}\n                />\n            </InputGroup>\n        </>\n    );\n}\n\nChatInputArea.propTypes = {\n    onSendMessage: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { List, Avatar } from 'antd';\n\nexport const ChatMessage = ({ user, message, style }) => {\n    return (\n        <List.Item style={style}>\n            <List.Item.Meta avatar={<Avatar src={user.picture} />} title={user.name} description={message} />\n        </List.Item>\n    );\n};\n\nChatMessage.propTypes = {\n    user: PropTypes.shape({\n        login: PropTypes.string.isRequired,\n    }),\n    message: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { List, AutoSizer } from 'react-virtualized';\n\nimport { ChatMessage } from './ChatMessage';\n\nexport const ChatThread = ({ threads }) => {\n    const renderRow = ({ index, key, style }) => {\n        return <ChatMessage {...threads[index]} key={key} style={style} />;\n    };\n\n    const getRowHeight = ({ index }) => {\n        const { message } = threads[index];\n        const messageLength = message.length;\n        return 60 + (Math.floor(messageLength / 50) + 1) * 20;\n    };\n\n    return (\n        <div style={{ flexGrow: 1 }}>\n            <AutoSizer>\n                {({ width, height }) => (\n                    <List\n                        rowCount={threads.length}\n                        width={width}\n                        height={height}\n                        rowHeight={getRowHeight}\n                        rowRenderer={renderRow}\n                        scrollToIndex={threads.length - 1}\n                    />\n                )}\n            </AutoSizer>\n        </div>\n    );\n};\n\nChatThread.propTypes = {\n    threads: PropTypes.arrayOf(\n        PropTypes.shape({\n            user: PropTypes.shape({\n                login: PropTypes.string.isRequired,\n            }),\n            message: PropTypes.string.isRequired,\n        }),\n    ),\n};\n","import React, { useContext, useState } from 'react';\nimport { Drawer, Button } from 'antd';\n\nimport { ChatInputArea } from './ChatInputArea';\nimport { ChatThread } from './ChatThread';\nimport { AuthContext } from '../../../../Data/Auth/AuthContext';\nimport { ChatButton } from './atoms';\nimport { useSocket } from '../../../../utils/hooks/useSocket';\n\nexport function Chat() {\n    const { user } = useContext(AuthContext);\n    const [messages, addMessage] = useState([]);\n    const [isOpened, setOpen] = useState(false);\n    const [unreadMessages, setUnreadMessages] = useState(messages.length);\n    if (isOpened && unreadMessages !== 0) {\n        setUnreadMessages(0);\n    }\n    const addMessageToStore = message => {\n        addMessage(prevMessages => {\n            return [...prevMessages, message];\n        });\n    };\n    const emitMessage = useSocket({\n        'message-received': message => {\n            setUnreadMessages(prev => prev + 1);\n            addMessageToStore(message);\n        },\n    });\n    const sendMessage = message => {\n        const newMessage = { user: user.info, message };\n        addMessageToStore(newMessage);\n        emitMessage('send-message', newMessage);\n    };\n    return (\n        <>\n            <ChatButton count={unreadMessages}>\n                <Button onClick={() => setOpen(true)} type=\"primary\" shape=\"circle\" icon=\"message\" size=\"large\" />\n            </ChatButton>\n            <Drawer\n                width={520}\n                placement=\"right\"\n                closable={false}\n                onClose={() => setOpen(false)}\n                visible={isOpened}\n                mask={true}\n                style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    height: '100%',\n                }}\n            >\n                <ChatThread threads={messages} />\n                <ChatInputArea onSendMessage={sendMessage} />\n            </Drawer>\n        </>\n    );\n}\n","import React, { useContext } from 'react';\nimport { Chat } from '../Chat';\nimport { PlayRoomContext } from '../../../../Data/PlaySession/PlayRoomContext';\nimport { Button, Tooltip } from 'antd';\nimport { StoriesContext } from '../../../../Data/Stories/StoriesContext';\nimport { calculateAverage } from '../../../../utils/average.score';\nimport { FloatButtonsContainer } from '../../../../components/FloatButtonsContainer/FloatButtonsContainer';\n\nexport const ActionButtons = () => {\n    const { currentStory, isRevealing, isCompleted, players, actions } = useContext(PlayRoomContext);\n    const { actions: storiesActions, stories } = useContext(StoriesContext);\n\n    const activeStory = stories.find(story => story.id === currentStory);\n    const isStoryActive = currentStory !== '' && currentStory !== null;\n    const resetCurrentStory = () => actions.setStory(null);\n    const setScore = () => {\n        if (activeStory) {\n            storiesActions.updateStory({\n                ...activeStory,\n                score: calculateAverage(players),\n            });\n            resetCurrentStory();\n        }\n    };\n    return (\n        <FloatButtonsContainer>\n            {isStoryActive && !isCompleted ? (\n                <Tooltip title=\"Start the game round\" placement=\"left\">\n                    <Button\n                        onClick={actions.startPlayRound}\n                        type=\"primary\"\n                        shape=\"circle\"\n                        icon=\"play-circle\"\n                        size=\"large\"\n                    />\n                </Tooltip>\n            ) : null}\n            {isCompleted && !isRevealing ? (\n                <Tooltip title=\"Reveal user scores\" placement=\"left\">\n                    <Button\n                        onClick={actions.showPlayedCards}\n                        type=\"primary\"\n                        shape=\"circle\"\n                        icon=\"question-circle\"\n                        size=\"large\"\n                    />\n                </Tooltip>\n            ) : null}\n            {isRevealing ? (\n                <Tooltip title=\"Set the final score\" placement=\"left\">\n                    <Button onClick={setScore} type=\"primary\" shape=\"circle\" icon=\"check-circle\" size=\"large\" />\n                </Tooltip>\n            ) : null}\n            {isRevealing ? (\n                <Tooltip title=\"Play another round for the story\" placement=\"left\">\n                    <Button onClick={actions.startPlayRound} type=\"primary\" shape=\"circle\" icon=\"reload\" size=\"large\" />\n                </Tooltip>\n            ) : null}\n            {isStoryActive ? (\n                <Tooltip title=\"Reset the progress and pick another story\" placement=\"left\">\n                    <Button onClick={resetCurrentStory} type=\"danger\" shape=\"circle\" icon=\"close-circle\" size=\"large\" />\n                </Tooltip>\n            ) : null}\n            <Chat />\n        </FloatButtonsContainer>\n    );\n};\n","import React, { useEffect, useContext } from 'react';\nimport { message } from 'antd';\n\nimport { DeckContainer } from './Components/Deck';\nimport { TableContainer } from './Components/Table/Container';\nimport { StoriesContainer } from './Components/Stories/Container';\nimport { TemporaryLoginForm } from './Components/Player/TemporaryLoginForm';\nimport { useCurrentGame, GamesContext } from '../../Data/Games/GamesContext';\nimport { PlayRoomProvider, PlayRoomContext } from '../../Data/PlaySession/PlayRoomContext';\nimport { StoriesProvider } from '../../Data/Stories/StoriesContext';\nimport { AuthContext, LOGIN_STATUS, checkIsAdmin } from '../../Data/Auth/AuthContext';\nimport { PlayersList } from './Components/Player/PlayersList';\nimport * as Atoms from './atoms';\nimport { ActionButtons } from './Components/ActionButtons/ActionButtons';\nimport { useAsyncEffect } from '../../utils/hooks/useAsyncEffect';\nimport { ApiClient } from '../../utils/api/api-client';\n\nexport const BoardContainer = ({ match }) => {\n    const { user } = useContext(AuthContext);\n    const { updateGame } = useContext(GamesContext);\n    const { isPlaying, actions } = useContext(PlayRoomContext);\n    const currentGameId = match.params.gameID;\n    const game = useCurrentGame(currentGameId);\n    useEffect(() => {\n        actions.enterRoom({\n            info: {\n                login: user.info.name,\n                picture: user.info.picture,\n            },\n        });\n        return actions.leaveRoom;\n    }, []);\n    useAsyncEffect(\n        async () => {\n            try {\n                const { data } = await ApiClient.get(`/api/game/${currentGameId}`); // TODO: add generic type here too\n                updateGame(data);\n            } catch (error) {\n                message.error(error.message);\n            }\n        },\n        [currentGameId],\n    );\n    const isAdmin = checkIsAdmin(user, match.params.user);\n    if (!game) {\n        return <h1>No game</h1>;\n    }\n    return (\n        <StoriesProvider gameId={currentGameId}>\n            <Atoms.GridWrapper>\n                <Atoms.GridHeader>\n                    <h2>{game.title}</h2>\n                </Atoms.GridHeader>\n                <Atoms.GridStories>\n                    <StoriesContainer admin={isAdmin} />\n                </Atoms.GridStories>\n                <Atoms.GridPlayers>\n                    <PlayersList />\n                </Atoms.GridPlayers>\n                <Atoms.GridDeck>\n                    <TableContainer admin={isAdmin} />\n                    {isPlaying ? <DeckContainer /> : null}\n                </Atoms.GridDeck>\n            </Atoms.GridWrapper>\n            <ActionButtons />\n        </StoriesProvider>\n    );\n};\n\nexport default function BranchBoard(props) {\n    const { user } = useContext(AuthContext);\n    const isAdmin = checkIsAdmin(user, props.match.params.user);\n    if ([LOGIN_STATUS.LOGGED_IN, LOGIN_STATUS.TEMP_USER].includes(user.loginStatus)) {\n        return (\n            <PlayRoomProvider gameId={props.match.params.gameID} isAdmin={isAdmin}>\n                <BoardContainer {...props} />\n            </PlayRoomProvider>\n        );\n    }\n    return <TemporaryLoginForm {...props} />;\n}\n"],"sourceRoot":""}