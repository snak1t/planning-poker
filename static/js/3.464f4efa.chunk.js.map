{"version":3,"sources":["utils/hooks/useTextField.js","Pages/Board/Components/Deck/atoms.ts","Data/socket.js","utils/hooks/useSocket.ts","Data/PlaySession/PlayRoomContext.tsx","Pages/Board/Components/Deck/deck.ts","Pages/Board/Components/Deck/Card.tsx","Pages/Board/Components/Deck/index.tsx","utils/average.score.js","Pages/Board/Components/Table/Container.jsx","Pages/Board/Components/Stories/Item.tsx","Pages/Board/Components/Stories/Item.form.jsx","Data/Stories/StoriesContext.tsx","Pages/Board/Components/Stories/StoryItem.tsx","Data/Stories/type.js","Pages/Board/Components/Stories/atoms.jsx","Pages/Board/Components/Report/Component.jsx","Pages/Board/Components/Report/Container.jsx","Pages/Board/Components/Stories/List.jsx","Pages/Board/Components/Stories/Form.jsx","Pages/Board/Components/Stories/Container.jsx","Pages/Board/Components/Player/TemporaryLoginForm.jsx","Pages/Board/Components/Player/atoms.tsx","Pages/Board/Components/Player/Player.tsx","Pages/Board/Components/Player/PlayersList.tsx","Pages/Board/atoms.js","Pages/Board/Components/Chat/atoms.js","Pages/Board/Components/Chat/ChatInputArea.jsx","Pages/Board/Components/Chat/ChatMessage.jsx","Pages/Board/Components/Chat/ChatThread.jsx","Pages/Board/Components/Chat/index.jsx","Pages/Board/Components/ActionButton/atoms.ts","Pages/Board/Components/ActionButton/ActionButtons.tsx","Pages/Board/index.js"],"names":["useTextField","initialValue","_useState","useState","_useState2","Object","_home_travis_build_snak1t_planning_poker_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","value","setValue","inputValue","valueToSet","target","CardListContainer","styled","div","_templateObject","CardContainer","_templateObject2","_ref","cardPicked","_ref2","CardTopLeftCaption","_templateObject3","CardBottomRightCaption","_templateObject4","CardCenterCaption","_templateObject5","CardInnerContainer","_templateObject6","socket","openSocket","process","useSocket","types","useEffect","_arr","entries","_i","length","_ref6","slicedToArray","type","cb","on","_arr2","_i2","_ref5","_ref4","removeEventListener","data","emit","initialState","players","isPlaying","isRevealing","currentStory","PlayRoomContext","React","objectSpread","isCompleted","actions","enterRoom","leaveRoom","setStory","startPlayRound","showPlayedCards","setPlayerScore","resetPlayersScores","users","map","user","score","PlayRoomProvider","children","gameId","isAdmin","_React$useState","_React$useState2","gameStatus","setGameStatus","emitSocket2","self-append-user","newPlayer","prevState","newScores","playerScore","id","startsWith","info","login","append-user","_ref3","concat","emitPatch","apply-play-room-patch","patch","user-left","userId","filter","player","setAndEmitPatch","every","react","Provider","Math","random","storyId","DECK","Card","_ref$onClick","onClick","displayedValue","test","className","toString","_onClick","apply","this","arguments","DeckContainer","useContext","AuthContext","myScore","setMyScore","handleCardPick","name","picture","react_default","a","createElement","card","Card_Card","assign","key","goldenRatio","sqrt","average","converge","divide","sum","getRoundedAverage","compose","ceil","calculateAverageForNumbers","n","round","pow","b","log","extractScores","pluck","divideScoresByType","groupBy","ifElse","is","String","always","calculateStringAnswer","cond","contains","T","calculationCondition","isNil","prop","calculateAverage","TableContainer","_useContext","style","margin","divider","Item","story","onSetEditMode","deleteStory","isStoryActive","buttonRow","icon","Boolean","list","backgroundColor","padding","Meta","title","description","ItemEdit","onUpdateStory","_useTextField","_useTextField2","newTitle","setTitle","_useTextField3","_useTextField4","newDescription","setDescription","es_form","onSubmit","e","preventDefault","input","placeholder","onChange","TextArea","es_button","htmlType","StoriesContext","stories","addStories","Promise","resolve","updateStory","removeStory","StoriesProvider","setStories","useAsyncEffect","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","ApiClient","get","sent","stop","setUpdatedStoryToStore","updatedStory","prevStories","removeStoryFromState","emitSocket","add-story","newStories","update-story","remove-story","_ref7","_callee2","storiesTitles","_ref8","_context2","active","post","_x","_ref9","_callee3","_ref10","_context3","put","_x2","_ref11","_callee4","_ref12","_context4","delete","params","t0","message","error","_x3","withRouter","props","editMode","setEditMode","partialStory","Item_Item","PropTypes","shape","number","isRequired","string","oneOfType","Wrapper","atoms_templateObject","Panel","atoms_templateObject2","FormWrapper","atoms_templateObject3","showTotalScore","Report","game","onClose","dataSource","index","modal","visible","footer","onCancel","width","table","columns","dataIndex","sorter","localeCompare","defaultSortOrder","match","reportVisibilityStatus","setReportVisibilityStatus","useCurrentGame","gameID","Fragment","Component_Report","separateStoriesByActivity","partition","StyledList","List","List_templateObject","StoriesPane","admin","itemLayout","renderItem","Stories_StoryItem","StoryList","_separateStoriesByAct","_separateStoriesByAct2","unplayedStories","playedStories","extra","Container","tabs","defaultActiveKey","TabPane","tab","List_StoriesPane","StoriesForm","mode","toggleMode","handleSubmit","onKeyPress","charCode","allTasks","item","split","StoriesContainer","isAddingStoryMode","setMode","List_StoryList","TemporaryLoginForm","replace","history","setLogin","gender","setGender","setTempUser","onOk","event","label","labelCol","span","wrapperCol","es_switch","checked","switchValue","checkedChildren","unCheckedChildren","UserList","ul","Player_atoms_templateObject","UserItem","li","Player_atoms_templateObject2","UserAvatar","Player_atoms_templateObject3","avatar","UserDefaultAvatar","atoms_templateObject4","floor","UserName","atoms_templateObject5","UserScore","atoms_templateObject6","PlayerComponent","_user$info","PlayersList","Player_PlayerComponent","GridWrapper","section","Board_atoms_templateObject","GridHeader","header","Board_atoms_templateObject2","GridStories","Board_atoms_templateObject3","GridPlayers","Board_atoms_templateObject4","GridDeck","Board_atoms_templateObject5","InputGroup","Chat_atoms_templateObject","ChatButton","Badge","Chat_atoms_templateObject2","ChatInputArea","onSendMessage","flexShrink","marginLeft","ChatMessage","src","ChatThread","threads","renderRow","ChatMessage_ChatMessage","getRowHeight","messageLength","flexGrow","es","height","rowCount","rowHeight","rowRenderer","scrollToIndex","Chat","messages","addMessage","_useState3","_useState4","isOpened","setOpen","_useState5","_useState6","unreadMessages","setUnreadMessages","addMessageToStore","prevMessages","toConsumableArray","emitMessage","message-received","count","size","drawer","placement","closable","mask","display","flexDirection","ChatThread_ChatThread","newMessage","FloatContainer","ActionButton_atoms_templateObject","ActionButtons","_useContext2","storiesActions","activeStory","find","resetCurrentStory","tooltip","BoardContainer","updateGame","GamesContext","currentGameId","checkIsAdmin","StoriesContext_StoriesProvider","Container_StoriesContainer","PlayersList_PlayersList","ActionButtons_ActionButtons","BranchBoard","LOGIN_STATUS","LOGGED_IN","TEMP_USER","includes","loginStatus","PlayRoomContext_PlayRoomProvider","Board_BoardContainer","TemporaryLoginForm_TemporaryLoginForm"],"mappings":"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","file":"static/js/3.464f4efa.chunk.js","sourcesContent":["import { useState } from 'react';\n\nexport const useTextField = initialValue => {\n    const [value, setValue] = useState(initialValue);\n    const handler = inputValue => {\n        const valueToSet = inputValue ? inputValue.target.value : '';\n        setValue(valueToSet);\n    };\n    return [value, handler];\n};\n","import styled from 'styled-components';\n\ntype CardProps = { cardPicked: boolean };\n\nexport const CardListContainer = styled.div`\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    grid-gap: 0.6rem;\n    background-color: #fff;\n    padding: 0.6rem;\n`;\n\nexport const CardContainer = styled('div')<CardProps>`\n    border: 1px solid #e8e8e8;\n    box-sizing: border-box;\n    margin: 0 0.2rem !important;\n    padding-top: 125%;\n    box-shadow: ${({ cardPicked }) => (cardPicked ? '0px 4px 12px rgba(25, 88, 203, 0.27)' : '')};\n    transform: translateY(${({ cardPicked }) => (cardPicked ? '-2rem' : 0)});\n    cursor: pointer;\n    background-color: #fff;\n    position: relative;\n`;\n\nexport const CardTopLeftCaption = styled.div`\n    font-size: 1.3rem;\n    line-height: 2rem;\n`;\n\nexport const CardBottomRightCaption = styled.div`\n    text-align: right;\n    line-height: 2rem;\n    font-size: 1.3rem;\n`;\n\nexport const CardCenterCaption = styled.div`\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    font-size: 2rem;\n    & span.fa {\n        font-size: 1rem;\n    }\n    & > span.userName {\n        font-size: 1rem;\n    }\n`;\n\nexport const CardInnerContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    padding: 0.6rem 1rem;\n`;\n","import openSocket from 'socket.io-client';\nexport const socket = openSocket(process.env.REACT_APP_API_ENDPOINT);\n","import { useEffect } from 'react';\nimport { socket } from '../../Data/socket';\n\nexport const useSocket = <T extends object>(types: T) => {\n    useEffect(() => {\n        for (let [type, cb] of Object.entries(types)) {\n            socket.on(type, cb);\n        }\n        return () => {\n            for (let [type, cb] of Object.entries(types)) {\n                socket.removeEventListener(type, cb);\n            }\n        };\n    }, []);\n    return (type: string, data: unknown) => {\n        socket.emit(type, data);\n    };\n};\n","import * as React from 'react';\nimport { useSocket } from '../../utils/hooks/useSocket';\n\nexport type Player = {\n    id: string;\n    info: {\n        picture: string | number;\n        login: string;\n    };\n    score: string | number | null;\n};\n\ninterface PlayRoomState {\n    players: Player[];\n    isPlaying: boolean;\n    isRevealing: boolean;\n    currentStory: null | string;\n}\n\ninterface Action<T> {\n    (value: T): void;\n}\n\ninterface PlayRoom extends PlayRoomState {\n    isCompleted: boolean;\n    actions: {\n        enterRoom: Action<Player>;\n        leaveRoom: Action<any>;\n        setStory: Action<string | null>;\n        startPlayRound: Action<any>;\n        showPlayedCards: Action<any>;\n        setPlayerScore: Action<Player>;\n    };\n}\n\nconst initialState: PlayRoomState = {\n    players: [],\n    isPlaying: false,\n    isRevealing: false,\n    currentStory: null,\n};\n\nexport const PlayRoomContext = React.createContext<PlayRoom>({\n    ...initialState,\n    isCompleted: false,\n    actions: {\n        enterRoom: () => {},\n        leaveRoom: () => {},\n        setStory: () => {},\n        startPlayRound: () => {},\n        showPlayedCards: () => {},\n        setPlayerScore: () => {},\n    },\n});\n\ntype SocketListeners = {\n    'append-user': (value: { newPlayer: Player }) => void;\n    'self-append-user': (value: { newPlayer: Player }) => void;\n    'apply-play-room-patch': (value: { patch: Partial<PlayRoomState> }) => void;\n    'user-left': (value: { userId: string }) => void;\n};\n\ntype Props = {\n    gameId: string;\n    isAdmin: boolean;\n};\n\nconst resetPlayersScores = (users: Player[]): Player[] => {\n    return users.map(user => ({ ...user, score: null }));\n};\n\nexport const PlayRoomProvider: React.SFC<Props> = ({ children, gameId, isAdmin }) => {\n    const [gameStatus, setGameStatus] = React.useState(initialState);\n    const emitSocket2 = useSocket<SocketListeners>({\n        'self-append-user': ({ newPlayer }) => {\n            setGameStatus(prevState => {\n                const newScores = prevState.players.map(playerScore =>\n                    playerScore.id.startsWith('temp__') && playerScore.info.login === newPlayer.info.login\n                        ? newPlayer\n                        : playerScore,\n                );\n                return {\n                    ...prevState,\n                    players: newScores,\n                };\n            });\n        },\n        'append-user': ({ newPlayer }) => {\n            setGameStatus(prevState => {\n                const newScores = prevState.players.concat(newPlayer);\n                if (isAdmin) {\n                    emitPatch({ players: newScores });\n                }\n                return { ...prevState, players: newScores };\n            });\n        },\n        'apply-play-room-patch': ({ patch }) => {\n            setGameStatus(prevState => ({ ...prevState, ...patch }));\n        },\n        'user-left': ({ userId }) => {\n            setGameStatus(prevState => ({\n                ...prevState,\n                players: prevState.players.filter(player => player.id !== userId),\n            }));\n        },\n    });\n\n    const enterRoom: Action<Player> = user => {\n        const newPlayer: Player = { ...user, score: null, id: `temp__${Math.random() * 100}` };\n        setGameStatus(prevState => {\n            return {\n                ...prevState,\n                players: prevState.players.concat(newPlayer),\n            };\n        });\n        emitSocket2('enter-room', { gameId, newPlayer });\n    };\n\n    const leaveRoom: Action<any> = () => {\n        emitSocket2('leave-room', { gameId });\n    };\n\n    const emitPatch = (patch: Partial<PlayRoomState>): Partial<PlayRoomState> => {\n        emitSocket2('emit-play-room-patch', { gameId, patch });\n        return patch;\n    };\n\n    const setAndEmitPatch = (cb: (prevState: PlayRoomState) => Partial<PlayRoomState>) => {\n        setGameStatus(prevState => {\n            return {\n                ...prevState,\n                ...emitPatch(cb(prevState)),\n            };\n        });\n    };\n\n    const setStory: Action<string | null> = storyId => {\n        setAndEmitPatch(prevState => ({\n            isPlaying: false,\n            isRevealing: false,\n            currentStory: storyId,\n            players: resetPlayersScores(prevState.players),\n        }));\n    };\n\n    const startPlayRound: Action<any> = () => {\n        setAndEmitPatch(prevState => ({\n            isPlaying: true,\n            isRevealing: false,\n            players: resetPlayersScores(prevState.players),\n        }));\n    };\n\n    const showPlayedCards: Action<any> = () => {\n        setAndEmitPatch(() => ({\n            isPlaying: false,\n            isRevealing: true,\n        }));\n    };\n\n    const setPlayerScore: Action<Player> = playerScore => {\n        setAndEmitPatch(prevState => ({\n            players: prevState.players.map(player =>\n                player.info.login === playerScore.info.login ? playerScore : player,\n            ),\n        }));\n    };\n\n    const isCompleted = gameStatus.players.every(player => player.score !== null);\n    // TODO: memoize provider value to fix unneeded re-renders\n    return (\n        <PlayRoomContext.Provider\n            value={{\n                ...gameStatus,\n                isCompleted,\n                actions: { enterRoom, setStory, startPlayRound, showPlayedCards, setPlayerScore, leaveRoom },\n            }}\n        >\n            {children}\n        </PlayRoomContext.Provider>\n    );\n};\n","export type Score = number | string;\n\nexport type DeckCard = {\n    value: Score;\n};\n\nexport const DECK: DeckCard[] = [\n    { value: 1 },\n    { value: 2 },\n    { value: 3 },\n    { value: 5 },\n    { value: 8 },\n    { value: 13 },\n    { value: 21 },\n    { value: 34 },\n    { value: 55 },\n    { value: 89 },\n    { value: 'question' },\n    { value: '\\u221e' },\n    { value: 'coffee' },\n];\n","import * as React from 'react';\n\nimport * as Atoms from './atoms';\nimport { Score } from './deck';\n\ntype Props = {\n    value: Score;\n    cardPicked: boolean;\n    onClick: (value: Score) => void;\n};\n\nexport const Card: React.SFC<Props> = ({ value, onClick = () => {}, cardPicked }) => {\n    const displayedValue: string | JSX.Element =\n        typeof value === 'string' ? (\n            /^\\w/.test(value) ? (\n                <span className={`fa fa-${value}`} />\n            ) : (\n                value\n            )\n        ) : (\n            value.toString()\n        );\n    return (\n        <Atoms.CardContainer onClick={() => onClick(value)} cardPicked={cardPicked}>\n            <Atoms.CardInnerContainer>\n                <Atoms.CardTopLeftCaption>{displayedValue}</Atoms.CardTopLeftCaption>\n                <Atoms.CardCenterCaption>\n                    <span>{displayedValue}</span>\n                </Atoms.CardCenterCaption>\n                <Atoms.CardBottomRightCaption>{displayedValue}</Atoms.CardBottomRightCaption>\n            </Atoms.CardInnerContainer>\n        </Atoms.CardContainer>\n    );\n};\n","import React, { useState, useContext } from 'react';\n\nimport * as Atoms from './atoms';\n\nimport { AuthContext } from '../../../../Data/Auth/AuthContext';\nimport { PlayRoomContext } from '../../../../Data/PlaySession/PlayRoomContext';\nimport { Score, DECK } from './deck';\nimport { Card } from './Card';\n\ntype TempUser = {\n    user: {\n        info: {\n            name: string;\n            picture: string;\n        };\n    };\n};\n\nexport function DeckContainer() {\n    const { user } = useContext(AuthContext) as TempUser;\n    const { actions } = useContext(PlayRoomContext);\n    const [myScore, setMyScore] = useState<Score | null>(null);\n    const handleCardPick = (score: Score) => {\n        setMyScore(score);\n        actions.setPlayerScore({\n            info: {\n                login: user.info.name,\n                picture: user.info.picture,\n            },\n            score,\n            id: `temp__${Math.random() * 100}`,\n        });\n    };\n    return (\n        <Atoms.CardListContainer>\n            {DECK.map((card, id) => (\n                <Card key={`card${id}`} cardPicked={card.value === myScore} {...card} onClick={handleCardPick} />\n            ))}\n        </Atoms.CardListContainer>\n    );\n}\n","import compose from 'ramda/src/compose'\nimport converge from 'ramda/src/converge'\nimport map from 'ramda/src/map'\nimport pluck from 'ramda/src/pluck'\nimport sum from 'ramda/src/sum'\nimport length from 'ramda/src/length'\nimport divide from 'ramda/src/divide'\nimport ifElse from 'ramda/src/ifElse'\nimport is from 'ramda/src/is'\nimport cond from 'ramda/src/cond'\nimport contains from 'ramda/src/contains'\nimport always from 'ramda/src/always'\nimport groupBy from 'ramda/src/groupBy'\nimport prop from 'ramda/src/prop'\nimport isNil from 'ramda/src/isNil'\nimport T from 'ramda/src/T'\n\nconst goldenRatio = (1 + Math.sqrt(5)) / 2\n\nconst log = (a, b) => Math.log(b) / Math.log(a)\n\nconst findFiboOrdinal = value =>\n  Math.round(log(goldenRatio, Math.sqrt(5) * value))\n\nconst findByOrdinal = n =>\n  Math.round(\n    (Math.pow(goldenRatio, n) - Math.pow(-goldenRatio, -n)) /\n      (2 * goldenRatio - 1)\n  )\n\nconst average = converge(divide, [sum, length])\n\nconst getRoundedAverage = compose(Math.ceil, average)\n\nconst calculateAverageForNumbers = compose(\n  findByOrdinal,\n  getRoundedAverage,\n  map(findFiboOrdinal)\n)\n\nconst extractScores = pluck('score')\n\nconst divideScoresByType = groupBy(\n  ifElse(is(String), always('string'), always('number'))\n)\n\nconst calculateStringAnswer = cond([\n  [contains('coffee'), always('Coffee break')],\n  [contains('question'), always('Unclear')],\n  [contains('\\u221e'), always('Infinity')],\n  [T, always('Unclear')]\n])\n\nconst calculationCondition = ifElse(\n  compose(isNil, prop('string')),\n  compose(calculateAverageForNumbers, prop('number')),\n  compose(calculateStringAnswer, prop('string'))\n)\n\nexport const calculateAverage = compose(\n  calculationCondition,\n  divideScoresByType,\n  extractScores\n)\n","import React, { useContext } from 'react';\nimport { Divider } from 'antd';\n\nimport { PlayRoomContext } from '../../../../Data/PlaySession/PlayRoomContext';\nimport { calculateAverage } from '../../../../utils/average.score';\n\nexport function TableContainer() {\n    const { players, isRevealing, currentStory } = useContext(PlayRoomContext);\n\n    if (currentStory === '' || currentStory === null) return null;\n    return (\n        <section style={{ margin: '0 10px' }}>\n            {isRevealing ? <Divider>Average Score is {calculateAverage(players)}</Divider> : null}\n        </section>\n    );\n}\n","import React, { useContext } from 'react';\nimport { List, Icon } from 'antd';\nimport { PlayRoomContext } from '../../../../Data/PlaySession/PlayRoomContext';\nimport { calculateAverage } from '../../../../utils/average.score';\nimport { Story, StoryId } from './story.type';\n\ntype Props = {\n    story: Story;\n    onSetEditMode: (value: boolean) => void;\n    deleteStory: (id: StoryId) => void;\n    isAdmin: boolean;\n};\n\nexport const Item: React.SFC<Props> = ({ story, onSetEditMode, deleteStory, isAdmin }) => {\n    const { currentStory, actions } = useContext(PlayRoomContext);\n    const isStoryActive = story.id === currentStory;\n\n    const buttonRow = !isAdmin\n        ? []\n        : [\n              isStoryActive ? null : <Icon type=\"star\" onClick={() => actions.setStory(story.id)} />,\n              isStoryActive ? null : <Icon type=\"delete\" onClick={() => deleteStory(story.id)} />,\n              <Icon type=\"edit\" onClick={() => onSetEditMode(true)} />,\n          ].filter(Boolean);\n\n    return (\n        <List.Item\n            actions={buttonRow}\n            style={{\n                backgroundColor: isStoryActive ? '#e6f7fe' : '#fff',\n                padding: '.4rem',\n            }}\n        >\n            <List.Item.Meta\n                title={`${story.title} ${story.score !== 0 ? ` - ${story.score} sp` : ''}`}\n                description={story.description}\n            />\n        </List.Item>\n    );\n};\n","import React from 'react';\nimport { Input, Button, Form } from 'antd';\n\nimport './styles.css';\nimport { useTextField } from '../../../../utils/hooks/useTextField';\n\nexport function ItemEdit({ story, onUpdateStory, onSetEditMode }) {\n    const [newTitle, setTitle] = useTextField(story.title || '');\n    const [newDescription, setDescription] = useTextField(story.description || '');\n\n    const saveItem = e => {\n        e.preventDefault();\n        onUpdateStory({\n            title: newTitle,\n            description: newDescription,\n        });\n        onSetEditMode(false);\n    };\n\n    return (\n        <Form onSubmit={saveItem}>\n            <header className=\"Stories-storyHeader\">\n                <Input placeholder=\"title of the story\" value={newTitle} onChange={setTitle} />\n            </header>\n            <div className=\"Stories-storyDescription\">\n                <Input.TextArea placeholder=\"Description\" value={newDescription} onChange={setDescription} />\n            </div>\n            <footer className=\"Stories-storyFooter\">\n                <Button onClick={() => onSetEditMode(false)}>Cancel</Button>\n                <Button htmlType=\"submit\" type=\"primary\">\n                    Save\n                </Button>\n            </footer>\n        </Form>\n    );\n}\n","import * as React from 'react';\n\nimport { message } from 'antd';\nimport { useAsyncEffect } from '../../utils/hooks/useAsyncEffect';\nimport { ApiClient } from '../../utils/api-client';\nimport { useSocket } from '../../utils/hooks/useSocket';\n\ntype Story = {\n    id: string;\n    description: string;\n    score: number | string;\n    title: string;\n};\n\ntype ContextState = {\n    stories: Story[];\n    actions: {\n        addStories: (title: Array<{ title: string }>) => Promise<void>;\n        updateStory: (story: Story) => Promise<void>;\n        removeStory: (storyId: string) => Promise<void>;\n    };\n};\nexport const StoriesContext = React.createContext<ContextState>({\n    stories: [],\n    actions: {\n        addStories: () => Promise.resolve(),\n        updateStory: () => Promise.resolve(),\n        removeStory: () => Promise.resolve(),\n    },\n});\n\ntype Props = {\n    gameId: string;\n};\n\ntype SocketListeners = {\n    'add-story': (data: { stories: Story[] }) => void;\n    'update-story': (data: { story: Story }) => void;\n    'remove-story': (data: { id: string }) => void;\n};\n\nexport const StoriesProvider: React.SFC<Props> = ({ children, gameId }) => {\n    const [stories, setStories] = React.useState<Story[]>([]);\n    useAsyncEffect(\n        async () => {\n            const { data } = await ApiClient.get(`/api/game/${gameId}`);\n            setStories(data.stories || []);\n        },\n        [gameId],\n    );\n\n    const setUpdatedStoryToStore = (updatedStory: Story): void => {\n        setStories(prevStories =>\n            prevStories.map(story => {\n                if (story.id === updatedStory.id) {\n                    return { ...story, ...updatedStory };\n                }\n                return story;\n            }),\n        );\n    };\n\n    const removeStoryFromState = (id: string) => {\n        setStories(prevStories => prevStories.filter(story => story.id !== id));\n    };\n\n    const emitSocket = useSocket<SocketListeners>({\n        'add-story': ({ stories: newStories }) => {\n            setStories(prevState => prevState.concat(newStories));\n        },\n        'update-story': ({ story }) => {\n            setUpdatedStoryToStore(story);\n        },\n        'remove-story': ({ id }) => {\n            removeStoryFromState(id);\n        },\n    });\n\n    const addStories = async (storiesTitles: Array<{ title: string }>) => {\n        const stories: Partial<Story>[] = storiesTitles.map(story => ({\n            description: '',\n            active: false,\n            score: 0,\n            ...story,\n        }));\n        const { data }: { data: Story[] } = await ApiClient.post('/api/story', { stories, gameId });\n        setStories(prevStories => prevStories.concat(data));\n        emitSocket('emit-add-story', { stories: data });\n    };\n\n    const updateStory = async (story: Story) => {\n        const { data }: { data: Story } = await ApiClient.put('/api/story', story);\n        setUpdatedStoryToStore(data);\n        emitSocket('emit-update-story', { story: data });\n    };\n\n    const removeStory = async (storyId: string) => {\n        try {\n            const { data } = await ApiClient.delete('/api/story', { params: { storyId } });\n            removeStoryFromState(data.id);\n            emitSocket('emit-remove-story', data);\n        } catch (error) {\n            message.error(error.message);\n        }\n    };\n    return (\n        <StoriesContext.Provider value={{ stories, actions: { addStories, updateStory, removeStory } }}>\n            {children}\n        </StoriesContext.Provider>\n    );\n};\n","import React, { useState, useContext } from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\n\nimport { Item } from './Item';\nimport { ItemEdit } from './Item.form';\nimport { StoriesContext } from '../../../../Data/Stories/StoriesContext';\nimport { Story } from './story.type';\n\ntype OwnProps = {\n    isAdmin: boolean;\n    story: Story;\n};\n\ntype Props = RouteComponentProps & OwnProps;\n\nconst StoryItem: React.SFC<Props> = props => {\n    const [editMode, setEditMode] = useState(false);\n    const { actions } = useContext(StoriesContext);\n    const onUpdateStory = (partialStory: Partial<Story>) => {\n        actions.updateStory({ ...props.story, ...partialStory });\n    };\n\n    return editMode ? (\n        <ItemEdit {...props} onUpdateStory={onUpdateStory} onSetEditMode={setEditMode} />\n    ) : (\n        <Item\n            story={props.story}\n            onSetEditMode={setEditMode}\n            isAdmin={props.isAdmin}\n            deleteStory={actions.removeStory}\n        />\n    );\n};\n\nexport default withRouter(StoryItem);\n","import PropTypes from 'prop-types';\n\nexport const storyType = PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    title: PropTypes.string.isRequired,\n    description: PropTypes.string.isRequired,\n    score: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n});\n","import styled from 'styled-components';\nimport { Card } from 'antd';\n\nconst Wrapper = styled(Card)`\n    width: 100%;\n`;\n\nconst Panel = styled.div`\n    display: flex;\n    flex-direction: column;\n`;\n\nconst FormWrapper = styled.div`\n    margin: 1rem 0;\n`;\n\nexport { Wrapper, Panel, FormWrapper };\n","import React from 'react';\nimport compose from 'ramda/src/compose';\nimport pluck from 'ramda/src/pluck';\nimport sum from 'ramda/src/sum';\nimport { Modal, Button, Table } from 'antd';\n\nconst showTotalScore = compose(\n    sum,\n    pluck('score'),\n);\n\nexport const Report = ({ game, stories, onClose }) => {\n    const columns = [\n        {\n            title: 'Story Tile',\n            dataIndex: 'title',\n            sorter: (a, b) => a.title.localeCompare(b.title),\n        },\n        {\n            title: 'Description',\n            dataIndex: 'description',\n        },\n        {\n            title: 'Story Points',\n            dataIndex: 'score',\n            defaultSortOrder: 'descend',\n            sorter: (a, b) => a.score - b.score,\n        },\n    ];\n    const dataSource = stories.map((story, index) => ({ ...story, key: index }));\n\n    return (\n        <Modal\n            visible={true}\n            title={`Report for \"${game.title}\"`}\n            footer={[\n                <Button onClick={onClose} key=\"ok-button\">\n                    Ok\n                </Button>,\n            ]}\n            onCancel={onClose}\n            width=\"800px\"\n        >\n            <Table\n                dataSource={dataSource}\n                columns={columns}\n                title={() => `Total Score ${showTotalScore(stories)}`}\n                footer={() => `Report generated By FreePlanningPoker`}\n            />\n        </Modal>\n    );\n};\n","import React, { useState, useContext } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nimport { Report } from './Component';\nimport { useCurrentGame } from '../../../../Data/Games/GamesContext';\nimport { Icon } from 'antd';\nimport { StoriesContext } from '../../../../Data/Stories/StoriesContext';\n\nexport function ReportContainer({ match: { params } }) {\n    const [reportVisibilityStatus, setReportVisibilityStatus] = useState(false);\n    const { stories } = useContext(StoriesContext);\n    const game = useCurrentGame(params.gameID);\n\n    const prepareReport = () => setReportVisibilityStatus(true);\n    const closeReport = () => setReportVisibilityStatus(false);\n\n    return (\n        <>\n            <Icon type=\"printer\" onClick={prepareReport} />\n            {reportVisibilityStatus ? <Report game={game} stories={stories} onClose={closeReport} /> : null}\n        </>\n    );\n}\n\nexport default withRouter(ReportContainer);\n","import React from 'react';\nimport { Tabs, List } from 'antd';\nimport PropTypes from 'prop-types';\nimport partition from 'ramda/src/partition';\nimport length from 'ramda/src/length';\nimport styled from 'styled-components';\n\nimport StoryItem from './StoryItem';\nimport './styles.css';\nimport { storyType } from '../../../../Data/Stories/type';\nimport { Wrapper } from './atoms';\nimport ReportContainer from '../Report/Container';\n\nconst separateStoriesByActivity = partition(story => story.score === 0);\n\nconst StyledList = styled(List)`\n    height: 370px;\n    overflow: scroll;\n`;\n\nconst StoriesPane = ({ stories, admin }) =>\n    length(stories) === 0 ? (\n        <span>No stories</span>\n    ) : (\n        <StyledList\n            itemLayout=\"vertical\"\n            dataSource={stories}\n            renderItem={story => <StoryItem isAdmin={admin} key={story.id} story={story} />}\n        />\n    );\n\nexport const StoryList = ({ stories, admin }) => {\n    const [unplayedStories, playedStories] = separateStoriesByActivity(stories);\n\n    return (\n        <Wrapper title=\"Stories\" extra={length(unplayedStories) === 0 ? <ReportContainer /> : null}>\n            <Tabs defaultActiveKey=\"1\">\n                <Tabs.TabPane tab=\"Remaining\" key=\"1\">\n                    <StoriesPane stories={unplayedStories} admin={admin} />\n                </Tabs.TabPane>\n                <Tabs.TabPane tab=\"Played\" key=\"2\">\n                    <StoriesPane stories={playedStories} admin={admin} />\n                </Tabs.TabPane>\n            </Tabs>\n        </Wrapper>\n    );\n};\n\nStoryList.propTypes = {\n    stories: PropTypes.arrayOf(storyType),\n    admin: PropTypes.bool.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport split from 'ramda/src/split';\nimport map from 'ramda/src/map';\nimport { Button, Input } from 'antd';\nimport { FormWrapper } from './atoms';\nimport { useTextField } from '../../../../utils/hooks/useTextField';\n\nexport function StoriesForm({ mode, toggleMode, isAdmin, handleSubmit }) {\n    const [value, setValue] = useTextField('');\n\n    const handleToggleMode = () => toggleMode(!mode);\n\n    const handleKeyPress = ({ charCode }) => {\n        if (charCode !== 13) {\n            return;\n        }\n        const allTasks = map(item => ({ title: item }), split('\\n', value));\n        handleSubmit(allTasks);\n        toggleMode(mode);\n        setValue();\n    };\n\n    if (!isAdmin) {\n        return null;\n    }\n    return (\n        <FormWrapper>\n            {mode ? (\n                <Input.TextArea\n                    placeholder=\"Story title\"\n                    value={value}\n                    onKeyPress={handleKeyPress}\n                    onChange={setValue}\n                />\n            ) : (\n                <Button onClick={handleToggleMode}>Add new Story</Button>\n            )}\n        </FormWrapper>\n    );\n}\n\nStoriesForm.propTypes = {\n    mode: PropTypes.bool.isRequired,\n    isAdmin: PropTypes.bool.isRequired,\n    toggleMode: PropTypes.func.isRequired,\n    handleSubmit: PropTypes.func.isRequired,\n};\n","import React, { useState, useContext } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nimport { StoryList } from './List';\nimport './styles.css';\nimport { Panel } from './atoms';\nimport { StoriesForm } from './Form';\nimport { StoriesContext } from '../../../../Data/Stories/StoriesContext';\n\nexport const StoriesContainer = withRouter(function StoriesContainer({ admin, match: { params } }) {\n    const [isAddingStoryMode, setMode] = useState(false);\n    const { stories, actions } = useContext(StoriesContext);\n\n    return (\n        <Panel>\n            <StoryList stories={stories} admin={admin} />\n            <StoriesForm\n                handleSubmit={actions.addStories}\n                toggleMode={setMode}\n                isAdmin={admin}\n                mode={isAddingStoryMode}\n            />\n        </Panel>\n    );\n});\n","import React, { useContext, useState } from 'react';\nimport { Modal, Input, Form, Switch, Icon } from 'antd';\nimport { useTextField } from '../../../../utils/hooks/useTextField';\nimport { AuthContext } from '../../../../Data/Auth/AuthContext';\n\nexport const TemporaryLoginForm = ({ history: { replace } }) => {\n    const [login, setLogin] = useTextField('');\n    const [gender, setGender] = useState('male');\n    const { setTempUser } = useContext(AuthContext);\n\n    const onSubmit = event => {\n        event.preventDefault();\n        setTempUser(login, gender);\n    };\n    const handleChange = switchValue => setGender(switchValue ? 'female' : 'male');\n    return (\n        <div>\n            <Modal visible={true} title=\"Sit a game in progress\" onCancel={() => replace('/')} onOk={onSubmit}>\n                <Form.Item label=\"Login\" labelCol={{ span: 6 }} wrapperCol={{ span: 14 }}>\n                    <Input id=\"login\" name=\"login\" placeholder=\"Your desired login\" value={login} onChange={setLogin} />\n                </Form.Item>\n                <Form.Item label=\"Gender\" labelCol={{ span: 6 }} wrapperCol={{ span: 14 }}>\n                    <Switch\n                        checked={gender === 'female'}\n                        onChange={handleChange}\n                        checkedChildren={<Icon type=\"man\" />}\n                        unCheckedChildren={<Icon type=\"woman\" />}\n                    />\n                </Form.Item>\n            </Modal>\n        </div>\n    );\n};\n","import styled from 'styled-components';\n\nexport const UserList = styled.ul`\n    list-style-type: none;\n    padding: 1rem;\n    background-color: #fff;\n    display: flex;\n    flex-wrap: wrap;\n`;\nexport const UserItem = styled.li`\n    padding: 0.8rem;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    position: relative;\n`;\nexport const UserAvatar = styled('div')<{ avatar: string }>`\n    width: 6.6rem;\n    height: 6.6rem;\n    background-image: url(${({ avatar }) => avatar});\n    background-size: contain;\n    border-radius: 50%;\n`;\n\nexport const UserDefaultAvatar = styled('div')<{ avatar: number }>`\n    width: 6.6rem;\n    height: 6.6rem;\n    background-image: url(/assets/avatars.jpg);\n    background-position-y: ${({ avatar }) => `-${55 + Math.floor(avatar / 6) * 130}px`};\n    background-position-x: ${({ avatar }) => `-${15 + ((avatar + 6) % 6) * 95}px`};\n    background-size: 600px;\n`;\nexport const UserName = styled.div`\n    text-align: center;\n`;\n\nexport const UserScore = styled.div`\n    position: absolute;\n    left: calc(50% + 2rem);\n    top: 0.5rem;\n    width: 2rem;\n    height: 2rem;\n    background-color: #52c41a;\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n`;\n","import * as React from 'react';\nimport * as Atoms from './atoms';\nimport { PlayRoomContext, Player } from '../../../../Data/PlaySession/PlayRoomContext';\n\ntype Props = {\n    user: Player;\n};\n\nconst renderScore = (score: string | number, shouldShowScore: boolean): string => {\n    if (!shouldShowScore) {\n        return '?';\n    }\n    if (typeof score === 'number') {\n        return score.toString();\n    }\n    return score[0];\n};\n\nexport const PlayerComponent: React.SFC<Props> = ({ user }) => {\n    const { isRevealing } = React.useContext(PlayRoomContext);\n    const { picture, login } = user.info;\n    return (\n        <Atoms.UserItem>\n            {typeof picture === 'number' ? (\n                <Atoms.UserDefaultAvatar avatar={picture} />\n            ) : (\n                <Atoms.UserAvatar avatar={picture} />\n            )}\n            <Atoms.UserName>{login}</Atoms.UserName>\n            {user.score !== null ? <Atoms.UserScore>{renderScore(user.score, isRevealing)}</Atoms.UserScore> : null}\n        </Atoms.UserItem>\n    );\n};\n","import * as React from 'react';\nimport * as Atoms from './atoms';\nimport { PlayRoomContext } from '../../../../Data/PlaySession/PlayRoomContext';\nimport { PlayerComponent } from './Player';\n\nexport const PlayersList: React.SFC<{}> = () => {\n    const { players } = React.useContext(PlayRoomContext);\n    return (\n        <Atoms.UserList>\n            {players.map((player, index) => (\n                <PlayerComponent key={index} user={player} />\n            ))}\n        </Atoms.UserList>\n    );\n};\n","import styled from 'styled-components';\nexport const GridWrapper = styled.section`\n    display: grid;\n    padding: 1rem;\n    width: 100%;\n    height: 100%;\n    grid-gap: 2rem;\n    grid-template-columns: 20rem 1fr;\n    grid-template-rows: 2rem;\n`;\n\nexport const GridHeader = styled.header`\n    grid-column: 1 / span 2;\n`;\n\nexport const GridStories = styled.section`\n    grid-row: 2 / span 2;\n`;\n\nexport const GridPlayers = styled.section`\n    grid-row: 2 / span 1;\n`;\n\nexport const GridDeck = styled.section`\n    grid-row: 3 / span 1;\n`;\n","import styled from 'styled-components';\nimport { Badge } from 'antd';\n\nexport const InputGroup = styled.div`\n    display: flex;\n    justify-content: space-between;\n`;\n\nexport const ChatButton = styled(Badge)``;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Divider, Button, Input } from 'antd';\nimport { InputGroup } from './atoms';\nimport { useTextField } from '../../../../utils/hooks/useTextField';\n\nexport function ChatInputArea({ onSendMessage }) {\n    const [value, setValue] = useTextField('');\n\n    const handleSubmit = () => {\n        if (value === '') return;\n        onSendMessage(value);\n        setValue();\n    };\n\n    const handleKeyDown = event => {\n        if (event.charCode === 13) {\n            return handleSubmit();\n        }\n    };\n\n    return (\n        <>\n            <Divider />\n            <InputGroup>\n                <Input name=\"chat\" onKeyPress={handleKeyDown} value={value} onChange={setValue} />\n                <Button\n                    type=\"primary\"\n                    shape=\"circle\"\n                    icon=\"enter\"\n                    onClick={handleSubmit}\n                    style={{ flexShrink: 0, marginLeft: '0.6rem' }}\n                />\n            </InputGroup>\n        </>\n    );\n}\n\nChatInputArea.propTypes = {\n    onSendMessage: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { List, Avatar } from 'antd';\n\nexport const ChatMessage = ({ user, message, style }) => {\n    return (\n        <List.Item style={style}>\n            <List.Item.Meta avatar={<Avatar src={user.picture} />} title={user.name} description={message} />\n        </List.Item>\n    );\n};\n\nChatMessage.propTypes = {\n    user: PropTypes.shape({\n        login: PropTypes.string.isRequired,\n    }),\n    message: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { List, AutoSizer } from 'react-virtualized';\n\nimport { ChatMessage } from './ChatMessage';\n\nexport const ChatThread = ({ threads }) => {\n    const renderRow = ({ index, key, style }) => {\n        return <ChatMessage {...threads[index]} key={key} style={style} />;\n    };\n\n    const getRowHeight = ({ index }) => {\n        const { message } = threads[index];\n        const messageLength = message.length;\n        return 60 + (Math.floor(messageLength / 50) + 1) * 20;\n    };\n\n    return (\n        <div style={{ flexGrow: 1 }}>\n            <AutoSizer>\n                {({ width, height }) => (\n                    <List\n                        rowCount={threads.length}\n                        width={width}\n                        height={height}\n                        rowHeight={getRowHeight}\n                        rowRenderer={renderRow}\n                        scrollToIndex={threads.length - 1}\n                    />\n                )}\n            </AutoSizer>\n        </div>\n    );\n};\n\nChatThread.propTypes = {\n    threads: PropTypes.arrayOf(\n        PropTypes.shape({\n            user: PropTypes.shape({\n                login: PropTypes.string.isRequired,\n            }),\n            message: PropTypes.string.isRequired,\n        }),\n    ),\n};\n","import React, { useContext, useState } from 'react';\nimport { Drawer, Button } from 'antd';\n\nimport { ChatInputArea } from './ChatInputArea';\nimport { ChatThread } from './ChatThread';\nimport { AuthContext } from '../../../../Data/Auth/AuthContext';\nimport { ChatButton } from './atoms';\nimport { useSocket } from '../../../../utils/hooks/useSocket';\n\nexport function Chat() {\n    const { user } = useContext(AuthContext);\n    const [messages, addMessage] = useState([]);\n    const [isOpened, setOpen] = useState(false);\n    const [unreadMessages, setUnreadMessages] = useState(messages.length);\n    if (isOpened && unreadMessages !== 0) {\n        setUnreadMessages(0);\n    }\n    const addMessageToStore = message => {\n        addMessage(prevMessages => {\n            return [...prevMessages, message];\n        });\n    };\n    const emitMessage = useSocket({\n        'message-received': message => {\n            setUnreadMessages(prev => prev + 1);\n            addMessageToStore(message);\n        },\n    });\n    const sendMessage = message => {\n        const newMessage = { user: user.info, message };\n        addMessageToStore(newMessage);\n        emitMessage('send-message', newMessage);\n    };\n    return (\n        <>\n            <ChatButton count={unreadMessages}>\n                <Button onClick={() => setOpen(true)} type=\"primary\" shape=\"circle\" icon=\"message\" size=\"large\" />\n            </ChatButton>\n            <Drawer\n                width={520}\n                placement=\"right\"\n                closable={false}\n                onClose={() => setOpen(false)}\n                visible={isOpened}\n                mask={true}\n                style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    height: '100%',\n                }}\n            >\n                <ChatThread threads={messages} />\n                <ChatInputArea onSendMessage={sendMessage} />\n            </Drawer>\n        </>\n    );\n}\n","import styled from 'styled-components';\n\nexport const FloatContainer = styled('div')`\n    position: fixed !important;\n    right: 2rem;\n    bottom: 2rem;\n    display: flex;\n    flex-direction: column;\n\n    & > * {\n        margin: 0.5rem 0rem !important;\n    }\n`;\n","import React, { useContext } from 'react';\nimport { Chat } from '../Chat';\nimport { PlayRoomContext } from '../../../../Data/PlaySession/PlayRoomContext';\nimport { FloatContainer } from './atoms';\nimport { Icon, Button, Tooltip } from 'antd';\nimport { StoriesContext } from '../../../../Data/Stories/StoriesContext';\nimport { calculateAverage } from '../../../../utils/average.score';\n\nexport const ActionButtons = () => {\n    const { currentStory, isRevealing, isCompleted, players, actions } = useContext(PlayRoomContext);\n\n    const { actions: storiesActions, stories } = useContext(StoriesContext);\n    const activeStory = stories.find(story => story.id === currentStory);\n    const isStoryActive = currentStory !== '' && currentStory !== null;\n    const resetCurrentStory = () => actions.setStory(null);\n    const setScore = () => {\n        if (activeStory) {\n            storiesActions.updateStory({\n                ...activeStory,\n                score: calculateAverage(players),\n            });\n            resetCurrentStory();\n        }\n    };\n    return (\n        <FloatContainer>\n            {isStoryActive && !isCompleted ? (\n                <Tooltip title=\"Start the game round\" placement=\"left\">\n                    <Button\n                        onClick={actions.startPlayRound}\n                        type=\"primary\"\n                        shape=\"circle\"\n                        icon=\"play-circle\"\n                        size=\"large\"\n                    />\n                </Tooltip>\n            ) : null}\n            {isCompleted && !isRevealing ? (\n                <Tooltip title=\"Reveal user scores\" placement=\"left\">\n                    <Button\n                        onClick={actions.showPlayedCards}\n                        type=\"primary\"\n                        shape=\"circle\"\n                        icon=\"question-circle\"\n                        size=\"large\"\n                    />\n                </Tooltip>\n            ) : null}\n            {isRevealing ? (\n                <Tooltip title=\"Set the final score\" placement=\"left\">\n                    <Button onClick={setScore} type=\"primary\" shape=\"circle\" icon=\"check-circle\" size=\"large\" />\n                </Tooltip>\n            ) : null}\n            {isRevealing ? (\n                <Tooltip title=\"Play another round for the story\" placement=\"left\">\n                    <Button onClick={actions.startPlayRound} type=\"primary\" shape=\"circle\" icon=\"reload\" size=\"large\" />\n                </Tooltip>\n            ) : null}\n            {isStoryActive ? (\n                <Tooltip title=\"Reset the progress and pick another story\" placement=\"left\">\n                    <Button onClick={resetCurrentStory} type=\"danger\" shape=\"circle\" icon=\"close-circle\" size=\"large\" />\n                </Tooltip>\n            ) : null}\n            <Chat />\n        </FloatContainer>\n    );\n};\n","import React, { useEffect, useContext } from 'react';\nimport { message } from 'antd';\n\nimport { DeckContainer } from './Components/Deck';\nimport { TableContainer } from './Components/Table/Container';\nimport { StoriesContainer } from './Components/Stories/Container';\nimport { TemporaryLoginForm } from './Components/Player/TemporaryLoginForm';\nimport { useAsyncEffect } from '../../utils/hooks/useAsyncEffect';\nimport { GamesContext, useCurrentGame } from '../../Data/Games/GamesContext';\nimport { PlayRoomProvider, PlayRoomContext } from '../../Data/PlaySession/PlayRoomContext';\nimport { StoriesProvider } from '../../Data/Stories/StoriesContext';\nimport { AuthContext, LOGIN_STATUS, checkIsAdmin } from '../../Data/Auth/AuthContext';\nimport { ApiClient } from '../../utils/api-client';\nimport { PlayersList } from './Components/Player/PlayersList';\nimport * as Atoms from './atoms';\nimport { ActionButtons } from './Components/ActionButton/ActionButtons';\n\nexport const BoardContainer = ({ match }) => {\n    const { user } = useContext(AuthContext);\n    const { isPlaying, actions } = useContext(PlayRoomContext);\n    const { updateGame } = useContext(GamesContext);\n    const currentGameId = match.params.gameID;\n    const game = useCurrentGame(currentGameId);\n    useEffect(() => {\n        actions.enterRoom({\n            info: {\n                login: user.info.name,\n                picture: user.info.picture,\n            },\n        });\n        return actions.leaveRoom;\n    }, []);\n    useAsyncEffect(\n        async () => {\n            try {\n                const { data } = await ApiClient.get(`/api/game/${currentGameId}`);\n                updateGame(data);\n            } catch (error) {\n                message.error(error.message);\n            }\n        },\n        [currentGameId],\n    );\n    const isAdmin = checkIsAdmin(user, match.params.user);\n    if (!game) {\n        return <h1>No game</h1>;\n    }\n    return (\n        <StoriesProvider gameId={currentGameId}>\n            <Atoms.GridWrapper>\n                <Atoms.GridHeader>\n                    <h2>{game.title}</h2>\n                </Atoms.GridHeader>\n                <Atoms.GridStories>\n                    <StoriesContainer admin={isAdmin} />\n                </Atoms.GridStories>\n                <Atoms.GridPlayers>\n                    <PlayersList />\n                </Atoms.GridPlayers>\n                <Atoms.GridDeck>\n                    <TableContainer admin={isAdmin} />\n                    {isPlaying ? <DeckContainer /> : null}\n                </Atoms.GridDeck>\n            </Atoms.GridWrapper>\n            <ActionButtons />\n        </StoriesProvider>\n    );\n};\n\nexport default function BranchBoard(props) {\n    const { user } = useContext(AuthContext);\n    const isAdmin = checkIsAdmin(user, props.match.params.user);\n    if ([LOGIN_STATUS.LOGGED_IN, LOGIN_STATUS.TEMP_USER].includes(user.loginStatus)) {\n        return (\n            <PlayRoomProvider gameId={props.match.params.gameID} isAdmin={isAdmin}>\n                <BoardContainer {...props} />\n            </PlayRoomProvider>\n        );\n    }\n    return <TemporaryLoginForm {...props} />;\n}\n"],"sourceRoot":""}