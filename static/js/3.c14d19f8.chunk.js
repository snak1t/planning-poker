(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{278:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(45),a=n(1),c=function(e){var t=Object(a.useState)(e),n=Object(r.a)(t,2),c=n[0],o=n[1];return[c,function(e){var t=e?e.target.value:"";o(t)}]}},326:function(e,t,n){},525:function(e,t){},582:function(e,t,n){"use strict";n.r(t);var r=n(18),a=n.n(r),c=n(44),o=n(1),i=n.n(o),u=n(588),l=n(45),s=n(38),m=n(39);function f(){var e=Object(s.a)(["\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    padding: 0.6rem 1rem;\n"]);return f=function(){return e},e}function d(){var e=Object(s.a)(["\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    font-size: 2rem;\n    & span.fa {\n        font-size: 1rem;\n    }\n    & > span.userName {\n        font-size: 1rem;\n    }\n"]);return d=function(){return e},e}function p(){var e=Object(s.a)(["\n    text-align: right;\n    line-height: 2rem;\n    font-size: 1.3rem;\n"]);return p=function(){return e},e}function v(){var e=Object(s.a)(["\n    font-size: 1.3rem;\n    line-height: 2rem;\n"]);return v=function(){return e},e}function y(){var e=Object(s.a)(["\n    border: 1px solid #e8e8e8;\n    box-sizing: border-box;\n    margin: 0 0.2rem !important;\n    padding-top: 125%;\n    box-shadow: ",";\n    transform: translateY(",");\n    cursor: pointer;\n    background-color: #fff;\n    position: relative;\n"]);return y=function(){return e},e}function g(){var e=Object(s.a)(["\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    grid-gap: 0.6rem;\n    background-color: #fff;\n    padding: 0.6rem;\n"]);return g=function(){return e},e}var b=m.a.div(g()),h=Object(m.a)("div")(y(),function(e){return e.cardPicked?"0px 4px 12px rgba(25, 88, 203, 0.27)":""},function(e){return e.cardPicked?"-2rem":0}),E=m.a.div(v()),O=m.a.div(p()),j=m.a.div(d()),x=m.a.div(f()),S=n(23),C=n(52),k=n(502),w=n.n(k)()("https://snaks-planning-poker-api.herokuapp.com"),P=function(e){return Object(o.useEffect)(function(){for(var t=Object.entries(e),n=0;n<t.length;n++){var r=t[n],a=Object(l.a)(r,2),c=a[0],o=a[1];w.on(c,o)}return function(){for(var t=Object.entries(e),n=0;n<t.length;n++){var r=t[n],a=Object(l.a)(r,2),c=a[0],o=a[1];w.removeEventListener(c,o)}}},[]),function(e,t){w.emit(e,t)}},R={players:[],isPlaying:!1,isRevealing:!1,currentStory:null},I=o.createContext(Object(C.a)({},R,{isCompleted:!1,actions:{enterRoom:function(){},leaveRoom:function(){},setStory:function(){},startPlayRound:function(){},showPlayedCards:function(){},setPlayerScore:function(){}}})),M=function(e){return e.map(function(e){return Object(C.a)({},e,{score:null})})},z=function(e){var t=e.children,n=e.gameId,r=e.isAdmin,a=o.useState(R),c=Object(l.a)(a,2),i=c[0],u=c[1],s=P({"self-append-user":function(e){var t=e.newPlayer;u(function(e){var n=e.players.map(function(e){return e.id.startsWith("temp__")&&e.info.login===t.info.login?t:e});return Object(C.a)({},e,{players:n})})},"append-user":function(e){var t=e.newPlayer;u(function(e){var n=e.players.concat(t);return r&&m({players:n}),Object(C.a)({},e,{players:n})})},"apply-play-room-patch":function(e){var t=e.patch;u(function(e){return Object(C.a)({},e,t)})},"user-left":function(e){var t=e.userId;u(function(e){return Object(C.a)({},e,{players:e.players.filter(function(e){return e.id!==t})})})}}),m=function(e){return s("emit-play-room-patch",{gameId:n,patch:e}),e},f=function(e){u(function(t){return Object(C.a)({},t,m(e(t)))})},d=i.players.every(function(e){return null!==e.score});return o.createElement(I.Provider,{value:Object(C.a)({},i,{isCompleted:d,actions:{enterRoom:function(e){var t=Object(C.a)({},e,{score:null,id:"temp__".concat(100*Math.random())});u(function(e){return Object(C.a)({},e,{players:e.players.concat(t)})}),s("enter-room",{gameId:n,newPlayer:t})},setStory:function(e){f(function(t){return{isPlaying:!1,isRevealing:!1,currentStory:e,players:M(t.players)}})},startPlayRound:function(){f(function(e){return{isPlaying:!0,isRevealing:!1,players:M(e.players)}})},showPlayedCards:function(){f(function(){return{isPlaying:!1,isRevealing:!0}})},setPlayerScore:function(e){f(function(t){return{players:t.players.map(function(t){return t.info.login===e.info.login?e:t})}})},leaveRoom:function(){s("leave-room",{gameId:n})}}})},t)},A=[{value:1},{value:2},{value:3},{value:5},{value:8},{value:13},{value:21},{value:34},{value:55},{value:89},{value:"question"},{value:"\u221e"},{value:"coffee"}],T={coffee:100,question:200,"\u221e":300},q=function(e,t){return null===e?-1:null===t?1:function(e,t){return Math.max(Math.min(1,e-t),-1)}("number"===typeof e?e:T[e],"number"===typeof t?t:T[t])},D=function(e){var t=e.value,n=e.onClick,r=void 0===n?function(){}:n,a=e.cardPicked,c="string"===typeof t?/^\w/.test(t)?o.createElement("span",{className:"fa fa-".concat(t)}):t:null===t?"":t.toString();return o.createElement(h,{onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return r(t)}),cardPicked:a},o.createElement(x,null,o.createElement(E,null,c),o.createElement(j,null,o.createElement("span",null,c)),o.createElement(O,null,c)))};function N(){var e=Object(o.useContext)(S.a).user,t=Object(o.useContext)(I).actions,n=Object(o.useState)(null),r=Object(l.a)(n,2),a=r[0],c=r[1],u=function(n){c(n),t.setPlayerScore({info:{login:e.info.name,picture:e.info.picture},score:n,id:"temp__".concat(100*Math.random())})};return i.a.createElement(b,null,A.map(function(e,t){return i.a.createElement(D,Object.assign({key:"card".concat(t),cardPicked:e.value===a},e,{onClick:u}))}))}var _=n(576),F=n(318),U=n.n(F),G=n(371),L=n.n(G),B=n(304),K=n.n(B),H=n(325),J=n.n(H),Y=n(374),W=n.n(Y),Q=n(320),V=n.n(Q),X=n(530),Z=n.n(X),$=n(357),ee=n.n($),te=n(535),ne=n.n(te),re=n(537),ae=n.n(re),ce=n(538),oe=n.n(ce),ie=n(536),ue=n.n(ie),le=n(532),se=n.n(le),me=n(373),fe=n.n(me),de=n(540),pe=n.n(de),ve=n(539),ye=n.n(ve),ge=(1+Math.sqrt(5))/2,be=L()(Z.a,[W.a,V.a]),he=U()(Math.ceil,be),Ee=U()(function(e){return Math.round((Math.pow(ge,e)-Math.pow(-ge,-e))/(2*ge-1))},he,K()(function(e){return Math.round((t=ge,n=Math.sqrt(5)*e,Math.log(n)/Math.log(t)));var t,n})),Oe=J()("score"),je=se()(ee()(ne()(String),ue()("string"),ue()("number"))),xe=ae()([[oe()("coffee"),ue()("Coffee break")],[oe()("question"),ue()("Unclear")],[oe()("\u221e"),ue()("Infinity")],[ye.a,ue()("Unclear")]]),Se=ee()(U()(pe.a,fe()("string")),U()(Ee,fe()("number")),U()(xe,fe()("string"))),Ce=U()(Se,je,Oe),ke=n(580),we=[{title:"Player",dataIndex:"info.login",sorter:function(e,t){return e.info.login.localeCompare(t.info.login)}},{title:"Story Points",dataIndex:"score",defaultSortOrder:"ascend",sorter:function(e,t){return q(e.score,t.score)}}],Pe=function(e){var t=e.players;return i.a.createElement("div",null,i.a.createElement(ke.a,{dataSource:t,columns:we,pagination:!1}))};function Re(){var e=Object(o.useContext)(I),t=e.isRevealing,n=e.players,r=e.currentStory;return""!==r&&null!==r&&t?i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,null,"Average Score is ",Ce(n)),i.a.createElement(Pe,{players:n})):null}var Ie=n(575),Me=n(592),ze=n(105),Ae=n(542),Te=n.n(Ae),qe=n(11),De=n(577),Ne=function(e){var t=e.story,n=e.onSetEditMode,r=e.deleteStory,a=e.isAdmin,c=Object(o.useContext)(I),u=c.currentStory,l=c.actions,s=t.id===u,m=a?[s?null:i.a.createElement(qe.a,{type:"star",onClick:function(){return l.setStory(t.id)}}),s?null:i.a.createElement(De.a,{title:"Are you sure you want to delete the story?",onConfirm:function(){return r(t.id)},placement:"topRight"},i.a.createElement(qe.a,{type:"delete"})),i.a.createElement(qe.a,{type:"edit",onClick:function(){return n(!0)}})].filter(Boolean):[];return i.a.createElement(Me.a.Item,{actions:m,style:{backgroundColor:s?"#e6f7fe":"#fff",padding:".4rem"}},i.a.createElement(Me.a.Item.Meta,{title:"".concat(t.title," ").concat(0!==t.score?" - ".concat(t.score," sp"):""),description:t.description}))},_e=n(581),Fe=n(586),Ue=n(80),Ge=(n(326),n(278));function Le(e){var t=e.story,n=e.onUpdateStory,r=e.onSetEditMode,a=Object(Ge.a)(t.title||""),c=Object(l.a)(a,2),o=c[0],u=c[1],s=Object(Ge.a)(t.description||""),m=Object(l.a)(s,2),f=m[0],d=m[1];return i.a.createElement(_e.a,{onSubmit:function(e){e.preventDefault(),n({title:o,description:f}),r(!1)}},i.a.createElement("header",{className:"Stories-storyHeader"},i.a.createElement(Fe.a,{placeholder:"title of the story",value:o,onChange:u})),i.a.createElement("div",{className:"Stories-storyDescription"},i.a.createElement(Fe.a.TextArea,{placeholder:"Description",value:f,onChange:d})),i.a.createElement("footer",{className:"Stories-storyFooter"},i.a.createElement(Ue.a,{onClick:function(){return r(!1)}},"Cancel"),i.a.createElement(Ue.a,{htmlType:"submit",type:"primary"},"Save")))}var Be=n(123),Ke=n(66),He=o.createContext({stories:[],actions:{addStories:function(){return Promise.resolve()},updateStory:function(){return Promise.resolve()},removeStory:function(){return Promise.resolve()}}}),Je=function(e){var t=e.children,n=e.gameId,r=o.useState([]),i=Object(l.a)(r,2),s=i[0],m=i[1];Object(Be.a)(Object(c.a)(a.a.mark(function e(){var t,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke.a.get("/api/game/".concat(n));case 2:t=e.sent,r=t.data,m(r.stories||[]);case 5:case"end":return e.stop()}},e,this)})),[n]);var f=function(e){m(function(t){return t.map(function(t){return t.id===e.id?Object(C.a)({},t,e):t})})},d=function(e){m(function(t){return t.filter(function(t){return t.id!==e})})},p=P({"add-story":function(e){var t=e.stories;m(function(e){return e.concat(t)})},"update-story":function(e){var t=e.story;f(t)},"remove-story":function(e){var t=e.id;d(t)}}),v=function(){var e=Object(c.a)(a.a.mark(function e(t){var r,c,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(e){return Object(C.a)({description:"",active:!1,score:0},e)}),e.next=3,Ke.a.post("/api/story",{stories:r,gameId:n});case 3:c=e.sent,o=c.data,m(function(e){return e.concat(o)}),p("emit-add-story",{stories:o});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke.a.put("/api/story",t);case 2:n=e.sent,r=n.data,f(r),p("emit-update-story",{story:r});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ke.a.delete("/api/story",{params:{storyId:t}});case 3:n=e.sent,r=n.data,d(r.id),p("emit-remove-story",r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),u.a.error(e.t0.message);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}();return o.createElement(He.Provider,{value:{stories:s,actions:{addStories:v,updateStory:y,removeStory:g}}},t)},Ye=Object(Ie.a)(function(e){var t=Object(o.useState)(!1),n=Object(l.a)(t,2),r=n[0],a=n[1],c=Object(o.useContext)(He).actions;return r?i.a.createElement(Le,Object.assign({},e,{onUpdateStory:function(t){c.updateStory(Object(C.a)({},e.story,t))},onSetEditMode:a})):i.a.createElement(Ne,{story:e.story,onSetEditMode:a,isAdmin:e.isAdmin,deleteStory:c.removeStory})}),We=n(0),Qe=n.n(We),Ve=(Qe.a.shape({id:Qe.a.number.isRequired,title:Qe.a.string.isRequired,description:Qe.a.string.isRequired,score:Qe.a.oneOfType([Qe.a.string,Qe.a.number]).isRequired}),n(585));function Xe(){var e=Object(s.a)(["\n    margin: 1rem 0;\n"]);return Xe=function(){return e},e}function Ze(){var e=Object(s.a)(["\n    display: flex;\n    flex-direction: column;\n"]);return Ze=function(){return e},e}function $e(){var e=Object(s.a)(["\n    width: 100%;\n"]);return $e=function(){return e},e}var et=Object(m.a)(Ve.a)($e()),tt=m.a.div(Ze()),nt=m.a.div(Xe()),rt=n(583),at=U()(W.a,J()("score")),ct=function(e){var t=e.game,n=e.stories,r=e.onClose,a=n.map(function(e,t){return Object(C.a)({},e,{key:t})});return i.a.createElement(rt.a,{visible:!0,title:'Report for "'.concat(t.title,'"'),footer:[i.a.createElement(Ue.a,{onClick:r,key:"ok-button"},"Ok")],onCancel:r,width:"800px"},i.a.createElement(ke.a,{dataSource:a,columns:[{title:"Story Tile",dataIndex:"title",sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"Description",dataIndex:"description"},{title:"Story Points",dataIndex:"score",defaultSortOrder:"descend",sorter:function(e,t){return e.score-t.score}}],title:function(){return"Total Score ".concat(at(n))},footer:function(){return"Report generated By FreePlanningPoker"}}))},ot=n(113);var it=Object(Ie.a)(function(e){var t=e.match.params,n=Object(o.useState)(!1),r=Object(l.a)(n,2),a=r[0],c=r[1],u=Object(o.useContext)(He).stories,s=Object(ot.c)(t.gameID);return i.a.createElement(i.a.Fragment,null,i.a.createElement(qe.a,{type:"printer",onClick:function(){return c(!0)}}),a?i.a.createElement(ct,{game:s,stories:u,onClose:function(){return c(!1)}}):null)});function ut(){var e=Object(s.a)(["\n    height: 370px;\n    overflow: scroll;\n"]);return ut=function(){return e},e}var lt=Te()(function(e){return 0===e.score}),st=Object(m.a)(Me.a)(ut()),mt=function(e){var t=e.stories,n=e.admin;return 0===V()(t)?i.a.createElement("span",null,"No stories"):i.a.createElement(st,{itemLayout:"vertical",dataSource:t,renderItem:function(e){return i.a.createElement(Ye,{isAdmin:n,key:e.id,story:e})}})},ft=function(e){var t=e.stories,n=e.admin,r=lt(t),a=Object(l.a)(r,2),c=a[0],o=a[1];return i.a.createElement(et,{title:"Stories",extra:0===V()(c)?i.a.createElement(it,null):null},i.a.createElement(ze.a,{defaultActiveKey:"1"},i.a.createElement(ze.a.TabPane,{tab:"Remaining",key:"1"},i.a.createElement(mt,{stories:c,admin:n})),i.a.createElement(ze.a.TabPane,{tab:"Played",key:"2"},i.a.createElement(mt,{stories:o,admin:n}))))},dt=n(356),pt=n.n(dt);function vt(e){var t=e.mode,n=e.toggleMode,r=e.isAdmin,a=e.handleSubmit,c=Object(Ge.a)(""),o=Object(l.a)(c,2),u=o[0],s=o[1];return r?i.a.createElement(nt,null,t?i.a.createElement(Fe.a.TextArea,{placeholder:"Story title",value:u,onKeyPress:function(e){if(13===e.charCode){var r=K()(function(e){return{title:e}},pt()("\n",u));a(r),n(t),s()}},onChange:s}):i.a.createElement(Ue.a,{onClick:function(){return n(!t)}},"Add new Story")):null}var yt=Object(Ie.a)(function(e){var t=e.admin,n=(e.match.params,Object(o.useState)(!1)),r=Object(l.a)(n,2),a=r[0],c=r[1],u=Object(o.useContext)(He),s=u.stories,m=u.actions;return i.a.createElement(tt,null,i.a.createElement(ft,{stories:s,admin:t}),i.a.createElement(vt,{handleSubmit:m.addStories,toggleMode:c,isAdmin:t,mode:a}))}),gt=n(578),bt=function(e){var t=e.history.replace,n=Object(Ge.a)(""),r=Object(l.a)(n,2),a=r[0],c=r[1],u=Object(o.useState)("male"),s=Object(l.a)(u,2),m=s[0],f=s[1],d=Object(o.useContext)(S.a).setTempUser;return i.a.createElement("div",null,i.a.createElement(rt.a,{visible:!0,title:"Sit a game in progress",onCancel:function(){return t("/")},onOk:function(e){e.preventDefault(),d(a,m)}},i.a.createElement(_e.a.Item,{label:"Login",labelCol:{span:6},wrapperCol:{span:14}},i.a.createElement(Fe.a,{id:"login",name:"login",placeholder:"Your desired login",value:a,onChange:c})),i.a.createElement(_e.a.Item,{label:"Gender",labelCol:{span:6},wrapperCol:{span:14}},i.a.createElement(gt.a,{checked:"female"===m,onChange:function(e){return f(e?"female":"male")},checkedChildren:i.a.createElement(qe.a,{type:"man"}),unCheckedChildren:i.a.createElement(qe.a,{type:"woman"})}))))};function ht(){var e=Object(s.a)(["\n    position: absolute;\n    left: calc(50% + 2rem);\n    top: 0.5rem;\n    width: 2rem;\n    height: 2rem;\n    background-color: #52c41a;\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n"]);return ht=function(){return e},e}function Et(){var e=Object(s.a)(["\n    text-align: center;\n"]);return Et=function(){return e},e}function Ot(){var e=Object(s.a)(["\n    width: 6.6rem;\n    height: 6.6rem;\n    background-image: url(/assets/avatars.jpg);\n    background-position-y: ",";\n    background-position-x: ",";\n    background-size: 600px;\n"]);return Ot=function(){return e},e}function jt(){var e=Object(s.a)(["\n    width: 6.6rem;\n    height: 6.6rem;\n    background-image: url(",");\n    background-size: contain;\n    border-radius: 50%;\n"]);return jt=function(){return e},e}function xt(){var e=Object(s.a)(["\n    padding: 0.8rem;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    position: relative;\n"]);return xt=function(){return e},e}function St(){var e=Object(s.a)(["\n    list-style-type: none;\n    padding: 1rem;\n    background-color: #fff;\n    display: flex;\n    flex-wrap: wrap;\n"]);return St=function(){return e},e}var Ct=m.a.ul(St()),kt=m.a.li(xt()),wt=Object(m.a)("div")(jt(),function(e){return e.avatar}),Pt=Object(m.a)("div")(Ot(),function(e){var t=e.avatar;return"-".concat(55+130*Math.floor(t/6),"px")},function(e){var t=e.avatar;return"-".concat(15+(t+6)%6*95,"px")}),Rt=m.a.div(Et()),It=m.a.div(ht()),Mt=function(e){var t,n=e.user,r=o.useContext(I).isRevealing,a=n.info,c=a.picture,i=a.login;return o.createElement(kt,null,"number"===typeof c?o.createElement(Pt,{avatar:c}):o.createElement(wt,{avatar:c}),o.createElement(Rt,null,i),null!==n.score?o.createElement(It,null,(t=n.score,r?"number"===typeof t?t.toString():t[0]:"?")):null)},zt=function(){var e=o.useContext(I).players;return o.createElement(Ct,null,e.map(function(e,t){return o.createElement(Mt,{key:t,user:e})}))};function At(){var e=Object(s.a)(["\n    grid-row: 3 / span 1;\n"]);return At=function(){return e},e}function Tt(){var e=Object(s.a)(["\n    grid-row: 2 / span 1;\n"]);return Tt=function(){return e},e}function qt(){var e=Object(s.a)(["\n    grid-row: 2 / span 2;\n"]);return qt=function(){return e},e}function Dt(){var e=Object(s.a)(["\n    grid-column: 1 / span 2;\n"]);return Dt=function(){return e},e}function Nt(){var e=Object(s.a)(["\n    display: grid;\n    padding: 1rem;\n    width: 100%;\n    height: 100%;\n    grid-gap: 2rem;\n    grid-template-columns: 20rem 1fr;\n    grid-template-rows: 2rem max-content auto;\n"]);return Nt=function(){return e},e}var _t=m.a.section(Nt()),Ft=m.a.header(Dt()),Ut=m.a.section(qt()),Gt=m.a.section(Tt()),Lt=m.a.section(At()),Bt=n(572),Kt=n(589),Ht=n(593);function Jt(){var e=Object(s.a)([""]);return Jt=function(){return e},e}function Yt(){var e=Object(s.a)(["\n    display: flex;\n    justify-content: space-between;\n"]);return Yt=function(){return e},e}var Wt=m.a.div(Yt()),Qt=Object(m.a)(Ht.a)(Jt());function Vt(e){var t=e.onSendMessage,n=Object(Ge.a)(""),r=Object(l.a)(n,2),a=r[0],c=r[1],o=function(){""!==a&&(t(a),c())};return i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,null),i.a.createElement(Wt,null,i.a.createElement(Fe.a,{name:"chat",onKeyPress:function(e){if(13===e.charCode)return o()},value:a,onChange:c}),i.a.createElement(Ue.a,{type:"primary",shape:"circle",icon:"enter",onClick:o,style:{flexShrink:0,marginLeft:"0.6rem"}})))}var Xt=n(571),Zt=n(579),$t=function(e){var t=e.user,n=e.message,r=e.style;return i.a.createElement(Me.a.Item,{style:r},i.a.createElement(Me.a.Item.Meta,{avatar:i.a.createElement(Zt.a,{src:t.picture}),title:t.name,description:n}))},en=function(e){var t=e.threads,n=function(e){var n=e.index,r=e.key,a=e.style;return i.a.createElement($t,Object.assign({},t[n],{key:r,style:a}))},r=function(e){var n=e.index,r=t[n].message.length;return 60+20*(Math.floor(r/50)+1)};return i.a.createElement("div",{style:{flexGrow:1}},i.a.createElement(Xt.a,null,function(e){var a=e.width,c=e.height;return i.a.createElement(Xt.b,{rowCount:t.length,width:a,height:c,rowHeight:r,rowRenderer:n,scrollToIndex:t.length-1})}))};function tn(){var e=Object(o.useContext)(S.a).user,t=Object(o.useState)([]),n=Object(l.a)(t,2),r=n[0],a=n[1],c=Object(o.useState)(!1),u=Object(l.a)(c,2),s=u[0],m=u[1],f=Object(o.useState)(r.length),d=Object(l.a)(f,2),p=d[0],v=d[1];s&&0!==p&&v(0);var y=function(e){a(function(t){return Object(Bt.a)(t).concat([e])})},g=P({"message-received":function(e){v(function(e){return e+1}),y(e)}});return i.a.createElement(i.a.Fragment,null,i.a.createElement(Qt,{count:p},i.a.createElement(Ue.a,{onClick:function(){return m(!0)},type:"primary",shape:"circle",icon:"message",size:"large"})),i.a.createElement(Kt.a,{width:520,placement:"right",closable:!1,onClose:function(){return m(!1)},visible:s,mask:!0,style:{display:"flex",flexDirection:"column",height:"100%"}},i.a.createElement(en,{threads:r}),i.a.createElement(Vt,{onSendMessage:function(t){var n={user:e.info,message:t};y(n),g("send-message",n)}})))}function nn(){var e=Object(s.a)(["\n    position: fixed !important;\n    right: 2rem;\n    bottom: 2rem;\n    display: flex;\n    flex-direction: column;\n\n    & > * {\n        margin: 0.5rem 0rem !important;\n    }\n"]);return nn=function(){return e},e}var rn=Object(m.a)("div")(nn()),an=n(97),cn=function(){var e=Object(o.useContext)(I),t=e.currentStory,n=e.isRevealing,r=e.isCompleted,a=e.players,c=e.actions,u=Object(o.useContext)(He),l=u.actions,s=u.stories.find(function(e){return e.id===t}),m=""!==t&&null!==t,f=function(){return c.setStory(null)};return i.a.createElement(rn,null,m&&!r?i.a.createElement(an.a,{title:"Start the game round",placement:"left"},i.a.createElement(Ue.a,{onClick:c.startPlayRound,type:"primary",shape:"circle",icon:"play-circle",size:"large"})):null,r&&!n?i.a.createElement(an.a,{title:"Reveal user scores",placement:"left"},i.a.createElement(Ue.a,{onClick:c.showPlayedCards,type:"primary",shape:"circle",icon:"question-circle",size:"large"})):null,n?i.a.createElement(an.a,{title:"Set the final score",placement:"left"},i.a.createElement(Ue.a,{onClick:function(){s&&(l.updateStory(Object(C.a)({},s,{score:Ce(a)})),f())},type:"primary",shape:"circle",icon:"check-circle",size:"large"})):null,n?i.a.createElement(an.a,{title:"Play another round for the story",placement:"left"},i.a.createElement(Ue.a,{onClick:c.startPlayRound,type:"primary",shape:"circle",icon:"reload",size:"large"})):null,m?i.a.createElement(an.a,{title:"Reset the progress and pick another story",placement:"left"},i.a.createElement(Ue.a,{onClick:f,type:"danger",shape:"circle",icon:"close-circle",size:"large"})):null,i.a.createElement(tn,null))};n.d(t,"BoardContainer",function(){return on}),n.d(t,"default",function(){return un});var on=function(e){var t=e.match,n=Object(o.useContext)(S.a).user,r=Object(o.useContext)(ot.a).updateGame,l=Object(o.useContext)(I),s=l.isPlaying,m=l.actions,f=t.params.gameID,d=Object(ot.c)(f);Object(o.useEffect)(function(){return m.enterRoom({info:{login:n.info.name,picture:n.info.picture}}),m.leaveRoom},[]),Object(Be.a)(Object(c.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ke.a.get("/api/game/".concat(f));case 3:t=e.sent,n=t.data,r(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u.a.error(e.t0.message);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),[f]);var p=Object(S.d)(n,t.params.user);return d?i.a.createElement(Je,{gameId:f},i.a.createElement(_t,null,i.a.createElement(Ft,null,i.a.createElement("h2",null,d.title)),i.a.createElement(Ut,null,i.a.createElement(yt,{admin:p})),i.a.createElement(Gt,null,i.a.createElement(zt,null)),i.a.createElement(Lt,null,i.a.createElement(Re,{admin:p}),s?i.a.createElement(N,null):null)),i.a.createElement(cn,null)):i.a.createElement("h1",null,"No game")};function un(e){var t=Object(o.useContext)(S.a).user,n=Object(S.d)(t,e.match.params.user);return[S.c.LOGGED_IN,S.c.TEMP_USER].includes(t.loginStatus)?i.a.createElement(z,{gameId:e.match.params.gameID,isAdmin:n},i.a.createElement(on,e)):i.a.createElement(bt,e)}}}]);
//# sourceMappingURL=3.c14d19f8.chunk.js.map