(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{278:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(44),a=n(1),c=function(e){var t=Object(a.useState)(e),n=Object(r.a)(t,2),c=n[0],o=n[1];return[c,function(e){var t=e?e.target.value:"";o(t)}]}},311:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(38);function a(){var e=Object(r.a)(["\n    position: fixed;\n    right: 2rem;\n    bottom: 2rem;\n    display: flex;\n    flex-direction: column;\n\n    & > * {\n        margin: 0.5rem 0rem;\n    }\n"]);return a=function(){return e},e}var c=n(39).a.div(a())},323:function(e,t,n){},497:function(e,t){},594:function(e,t,n){"use strict";n.r(t);var r=n(16),a=n.n(r),c=n(32),o=n(1),i=n.n(o),u=n(600),l=n(44),s=n(38),m=n(39);function f(){var e=Object(s.a)(["\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    padding: 0.6rem 1rem;\n"]);return f=function(){return e},e}function d(){var e=Object(s.a)(["\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    font-size: 2rem;\n    & span.fa {\n        font-size: 1rem;\n    }\n    & > span.userName {\n        font-size: 1rem;\n    }\n"]);return d=function(){return e},e}function p(){var e=Object(s.a)(["\n    text-align: right;\n    line-height: 2rem;\n    font-size: 1.3rem;\n"]);return p=function(){return e},e}function v(){var e=Object(s.a)(["\n    font-size: 1.3rem;\n    line-height: 2rem;\n"]);return v=function(){return e},e}function y(){var e=Object(s.a)(["\n    border: 1px solid #e8e8e8;\n    box-sizing: border-box;\n    margin: 0 0.2rem !important;\n    padding-top: 125%;\n    box-shadow: ",";\n    transform: translateY(",");\n    cursor: pointer;\n    background-color: #fff;\n    position: relative;\n"]);return y=function(){return e},e}function g(){var e=Object(s.a)(["\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    grid-gap: 0.6rem;\n    background-color: #fff;\n    padding: 0.6rem;\n"]);return g=function(){return e},e}var b=m.a.div(g()),h=Object(m.a)("div")(y(),function(e){return e.cardPicked?"0px 4px 12px rgba(25, 88, 203, 0.27)":""},function(e){return e.cardPicked?"-2rem":0}),E=m.a.div(v()),O=m.a.div(p()),j=m.a.div(d()),x=m.a.div(f()),S=n(17),C=n(51),k=n(474),w=n.n(k)()("https://snaks-planning-poker-api.herokuapp.com"),P=function(e){return Object(o.useEffect)(function(){for(var t=Object.entries(e),n=0;n<t.length;n++){var r=t[n],a=Object(l.a)(r,2),c=a[0],o=a[1];w.on(c,o)}return function(){for(var t=Object.entries(e),n=0;n<t.length;n++){var r=t[n],a=Object(l.a)(r,2),c=a[0],o=a[1];w.removeEventListener(c,o)}}},[]),function(e,t){w.emit(e,t)}},I={players:[],isPlaying:!1,isRevealing:!1,currentStory:null},M=o.createContext(Object(C.a)({},I,{isCompleted:!1,actions:{enterRoom:function(){},leaveRoom:function(){},setStory:function(){},startPlayRound:function(){},showPlayedCards:function(){},setPlayerScore:function(){}}})),R=function(e){return e.map(function(e){return Object(C.a)({},e,{score:null})})},z=function(e){var t=e.children,n=e.gameId,r=e.isAdmin,a=o.useState(I),c=Object(l.a)(a,2),i=c[0],u=c[1],s=P({"self-append-user":function(e){var t=e.newPlayer;u(function(e){var n=e.players.map(function(e){return e.id.startsWith("temp__")&&e.info.login===t.info.login?t:e});return Object(C.a)({},e,{players:n})})},"append-user":function(e){var t=e.newPlayer;u(function(e){var n=e.players.concat(t);return r&&m({players:n}),Object(C.a)({},e,{players:n})})},"apply-play-room-patch":function(e){var t=e.patch;u(function(e){return Object(C.a)({},e,t)})},"user-left":function(e){var t=e.userId;u(function(e){return Object(C.a)({},e,{players:e.players.filter(function(e){return e.id!==t})})})}}),m=function(e){return s("emit-play-room-patch",{gameId:n,patch:e}),e},f=function(e){u(function(t){return Object(C.a)({},t,m(e(t)))})},d=i.players.every(function(e){return null!==e.score});return o.createElement(M.Provider,{value:Object(C.a)({},i,{isCompleted:d,actions:{enterRoom:function(e){var t=Object(C.a)({},e,{score:null,id:"temp__".concat(100*Math.random())});u(function(e){return Object(C.a)({},e,{players:e.players.concat(t)})}),s("enter-room",{gameId:n,newPlayer:t})},setStory:function(e){f(function(t){return{isPlaying:!1,isRevealing:!1,currentStory:e,players:R(t.players)}})},startPlayRound:function(){f(function(e){return{isPlaying:!0,isRevealing:!1,players:R(e.players)}})},showPlayedCards:function(){f(function(){return{isPlaying:!1,isRevealing:!0}})},setPlayerScore:function(e){f(function(t){return{players:t.players.map(function(t){return t.info.login===e.info.login?e:t})}})},leaveRoom:function(){s("leave-room",{gameId:n})}}})},t)},A=[{value:1},{value:2},{value:3},{value:5},{value:8},{value:13},{value:21},{value:34},{value:55},{value:89},{value:"question"},{value:"\u221e"},{value:"coffee"}],D={coffee:100,question:200,"\u221e":300},T=function(e,t){return null===e?-1:null===t?1:function(e,t){return Math.max(Math.min(1,e-t),-1)}("number"===typeof e?e:D[e],"number"===typeof t?t:D[t])},N=function(e){var t=e.value,n=e.onClick,r=void 0===n?function(){}:n,a=e.cardPicked,c="string"===typeof t?/^\w/.test(t)?o.createElement("span",{className:"fa fa-".concat(t)}):t:null===t?"":t.toString();return o.createElement(h,{onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return r(t)}),cardPicked:a},o.createElement(x,null,o.createElement(E,null,c),o.createElement(j,null,o.createElement("span",null,c)),o.createElement(O,null,c)))};function _(){var e=Object(o.useContext)(S.a).user,t=Object(o.useContext)(M).actions,n=Object(o.useState)(null),r=Object(l.a)(n,2),a=r[0],c=r[1],u=function(n){c(n),t.setPlayerScore({info:{login:e.info.name,picture:e.info.picture},score:n,id:"temp__".concat(100*Math.random())})};return i.a.createElement(b,null,A.map(function(e,t){return i.a.createElement(N,Object.assign({key:"card".concat(t),cardPicked:e.value===a},e,{onClick:u}))}))}var q=n(588),F=n(366),U=n.n(F),G=n(360),L=n.n(G),B=n(299),K=n.n(B),H=n(317),J=n.n(H),Y=n(364),W=n.n(Y),Q=n(365),V=n.n(Q),X=n(507),Z=n.n(X),$=n(518),ee=n.n($),te=n(519),ne=n.n(te),re=n(521),ae=n.n(re),ce=n(522),oe=n.n(ce),ie=n(520),ue=n.n(ie),le=n(515),se=n.n(le),me=n(363),fe=n.n(me),de=n(532),pe=n.n(de),ve=n(531),ye=n.n(ve),ge=(1+Math.sqrt(5))/2,be=L()(Z.a,[W.a,V.a]),he=U()(Math.ceil,be),Ee=U()(function(e){return Math.round((Math.pow(ge,e)-Math.pow(-ge,-e))/(2*ge-1))},he,K()(function(e){return Math.round((t=ge,n=Math.sqrt(5)*e,Math.log(n)/Math.log(t)));var t,n})),Oe=J()("score"),je=se()(ee()(ne()(String),ue()("string"),ue()("number"))),xe=ae()([[oe()("coffee"),ue()("Coffee break")],[oe()("question"),ue()("Unclear")],[oe()("\u221e"),ue()("Infinity")],[ye.a,ue()("Unclear")]]),Se=ee()(U()(pe.a,fe()("string")),U()(Ee,fe()("number")),U()(xe,fe()("string"))),Ce=U()(Se,je,Oe),ke=n(592),we=[{title:"Player",dataIndex:"info.login",sorter:function(e,t){return e.info.login.localeCompare(t.info.login)}},{title:"Story Points",dataIndex:"score",defaultSortOrder:"ascend",sorter:function(e,t){return T(e.score,t.score)}}],Pe=function(e){var t=e.players;return i.a.createElement("div",null,i.a.createElement(ke.a,{dataSource:t,columns:we,pagination:!1}))};function Ie(){var e=Object(o.useContext)(M),t=e.isRevealing,n=e.players,r=e.currentStory;return""!==r&&null!==r&&t?i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,null,"Average Score is ",Ce(n)),i.a.createElement(Pe,{players:n})):null}var Me=n(587),Re=n(608),ze=n(575),Ae=n(534),De=n.n(Ae),Te=n(11),Ne=n(589),_e=function(e){var t=e.story,n=e.onSetEditMode,r=e.deleteStory,a=e.isAdmin,c=Object(o.useContext)(M),u=c.currentStory,l=c.actions,s=t.id===u,m=a?[s?null:i.a.createElement(Te.a,{type:"star",onClick:function(){return l.setStory(t.id)}}),s?null:i.a.createElement(Ne.a,{title:"Are you sure you want to delete the story?",onConfirm:function(){return r(t.id)},placement:"topRight"},i.a.createElement(Te.a,{type:"delete"})),i.a.createElement(Te.a,{type:"edit",onClick:function(){return n(!0)}})].filter(Boolean):[];return i.a.createElement(Re.a.Item,{actions:m,style:{backgroundColor:s?"#e6f7fe":"#fff",padding:".4rem"}},i.a.createElement(Re.a.Item.Meta,{title:"".concat(t.title," ").concat(0!==t.score?" - ".concat(t.score," sp"):""),description:t.description}))},qe=n(593),Fe=n(598),Ue=n(57),Ge=(n(323),n(278));function Le(e){var t=e.story,n=e.onUpdateStory,r=e.onSetEditMode,a=Object(Ge.a)(t.title||""),c=Object(l.a)(a,2),o=c[0],u=c[1],s=Object(Ge.a)(t.description||""),m=Object(l.a)(s,2),f=m[0],d=m[1];return i.a.createElement(qe.a,{onSubmit:function(e){e.preventDefault(),n({title:o,description:f}),r(!1)}},i.a.createElement("header",{className:"Stories-storyHeader"},i.a.createElement(Fe.a,{placeholder:"title of the story",value:o,onChange:u})),i.a.createElement("div",{className:"Stories-storyDescription"},i.a.createElement(Fe.a.TextArea,{placeholder:"Description",value:f,onChange:d})),i.a.createElement("footer",{className:"Stories-storyFooter"},i.a.createElement(Ue.a,{onClick:function(){return r(!1)}},"Cancel"),i.a.createElement(Ue.a,{htmlType:"submit",type:"primary"},"Save")))}var Be=n(121),Ke=n(58),He=o.createContext({stories:[],actions:{addStories:function(){return Promise.resolve()},updateStory:function(){return Promise.resolve()},removeStory:function(){return Promise.resolve()}}}),Je=function(e){var t=e.children,n=e.gameId,r=o.useState([]),i=Object(l.a)(r,2),s=i[0],m=i[1];Object(Be.a)(Object(c.a)(a.a.mark(function e(){var t,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke.a.get("/api/game/".concat(n));case 2:t=e.sent,r=t.data,m(r.stories||[]);case 5:case"end":return e.stop()}},e,this)})),[n]);var f=function(e){m(function(t){return t.map(function(t){return t.id===e.id?Object(C.a)({},t,e):t})})},d=function(e){m(function(t){return t.filter(function(t){return t.id!==e})})},p=P({"add-story":function(e){var t=e.stories;m(function(e){return e.concat(t)})},"update-story":function(e){var t=e.story;f(t)},"remove-story":function(e){var t=e.id;d(t)}}),v=function(){var e=Object(c.a)(a.a.mark(function e(t){var r,c,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(e){return Object(C.a)({description:"",active:!1,score:0},e)}),e.next=3,Ke.a.post("/api/story",{stories:r,gameId:n});case 3:c=e.sent,o=c.data,m(function(e){return e.concat(o)}),p("emit-add-story",{stories:o});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke.a.put("/api/story",t);case 2:n=e.sent,r=n.data,f(r),p("emit-update-story",{story:r});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ke.a.delete("/api/story",{params:{storyId:t}});case 3:n=e.sent,r=n.data,d(r.id),p("emit-remove-story",r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),u.a.error(e.t0.message);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}();return o.createElement(He.Provider,{value:{stories:s,actions:{addStories:v,updateStory:y,removeStory:g}}},t)},Ye=Object(Me.a)(function(e){var t=Object(o.useState)(!1),n=Object(l.a)(t,2),r=n[0],a=n[1],c=Object(o.useContext)(He).actions;return r?i.a.createElement(Le,Object.assign({},e,{onUpdateStory:function(t){c.updateStory(Object(C.a)({},e.story,t))},onSetEditMode:a})):i.a.createElement(_e,{story:e.story,onSetEditMode:a,isAdmin:e.isAdmin,deleteStory:c.removeStory})}),We=n(599);function Qe(){var e=Object(s.a)(["\n    margin: 1rem 0;\n"]);return Qe=function(){return e},e}function Ve(){var e=Object(s.a)(["\n    display: flex;\n    flex-direction: column;\n"]);return Ve=function(){return e},e}function Xe(){var e=Object(s.a)(["\n    width: 100%;\n"]);return Xe=function(){return e},e}var Ze=Object(m.a)(We.a)(Xe()),$e=m.a.div(Ve()),et=m.a.div(Qe()),tt=n(596),nt=U()(W.a,J()("score")),rt=function(e){var t=e.game,n=e.stories,r=e.onClose,a=[{title:"Story Tile",dataIndex:"title",sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"Description",dataIndex:"description"},{title:"Story Points",dataIndex:"score",defaultSortOrder:"descend",sorter:function(e,t){return T(e.score,t.score)}}],c=n.map(function(e,t){return Object(C.a)({},e,{key:t})});return i.a.createElement(tt.a,{visible:!0,title:'Report for "'.concat(t.title,'"'),footer:[i.a.createElement(Ue.a,{onClick:r,key:"ok-button"},"Ok")],onCancel:r,width:"800px"},i.a.createElement(ke.a,{dataSource:c,columns:a,title:function(){return"Total Score ".concat(nt(n))},footer:function(){return"Report generated By FreePlanningPoker"}}))},at=n(109);var ct=Object(Me.a)(function(e){var t=e.match.params,n=Object(o.useState)(!1),r=Object(l.a)(n,2),a=r[0],c=r[1],u=Object(o.useContext)(He).stories,s=Object(at.c)(t.gameID);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Te.a,{type:"printer",onClick:function(){return c(!0)}}),a?i.a.createElement(rt,{game:s,stories:u,onClose:function(){return c(!1)}}):null)});function ot(){var e=Object(s.a)(["\n    height: 370px;\n    overflow: scroll;\n"]);return ot=function(){return e},e}var it=De()(function(e){return 0===e.score}),ut=Object(m.a)(Re.a)(ot()),lt=function(e){var t=e.stories,n=e.admin;return 0===V()(t)?i.a.createElement("span",null,"No stories"):i.a.createElement(ut,{itemLayout:"vertical",dataSource:t,renderItem:function(e){return i.a.createElement(Ye,{isAdmin:n,key:e.id,story:e})}})},st=function(e){var t=e.stories,n=e.admin,r=it(t),a=Object(l.a)(r,2),c=a[0],o=a[1];return i.a.createElement(Ze,{title:"Stories",extra:0===V()(c)?i.a.createElement(ct,null):null},i.a.createElement(ze.a,{defaultActiveKey:"1"},i.a.createElement(ze.a.TabPane,{tab:"Remaining",key:"1"},i.a.createElement(lt,{stories:c,admin:n})),i.a.createElement(ze.a.TabPane,{tab:"Played",key:"2"},i.a.createElement(lt,{stories:o,admin:n}))))},mt=n(540),ft=n.n(mt);function dt(e){var t=e.mode,n=e.toggleMode,r=e.isAdmin,a=e.handleSubmit,c=Object(Ge.a)(""),o=Object(l.a)(c,2),u=o[0],s=o[1];return r?i.a.createElement(et,null,t?i.a.createElement(Fe.a.TextArea,{placeholder:"Story title",value:u,onKeyPress:function(e){if(13===e.charCode){var r=K()(function(e){return{title:e}},ft()("\n",u));a(r),n(t),s()}},onChange:s}):i.a.createElement(Ue.a,{onClick:function(){return n(!t)}},"Add new Story")):null}var pt=Object(Me.a)(function(e){var t=e.admin,n=(e.match.params,Object(o.useState)(!1)),r=Object(l.a)(n,2),a=r[0],c=r[1],u=Object(o.useContext)(He),s=u.stories,m=u.actions;return i.a.createElement($e,null,i.a.createElement(st,{stories:s,admin:t}),i.a.createElement(dt,{handleSubmit:m.addStories,toggleMode:c,isAdmin:t,mode:a}))}),vt=n(590),yt=function(e){var t=e.history.replace,n=Object(Ge.a)(""),r=Object(l.a)(n,2),a=r[0],c=r[1],u=Object(o.useState)("male"),s=Object(l.a)(u,2),m=s[0],f=s[1],d=Object(o.useContext)(S.a).setTempUser;return i.a.createElement("div",null,i.a.createElement(tt.a,{visible:!0,title:"Sit a game in progress",onCancel:function(){return t("/")},onOk:function(e){e.preventDefault(),d(a,m)}},i.a.createElement(qe.a.Item,{label:"Login",labelCol:{span:6},wrapperCol:{span:14}},i.a.createElement(Fe.a,{id:"login",name:"login",placeholder:"Your desired login",value:a,onChange:c})),i.a.createElement(qe.a.Item,{label:"Gender",labelCol:{span:6},wrapperCol:{span:14}},i.a.createElement(vt.a,{checked:"female"===m,onChange:function(e){return f(e?"female":"male")},checkedChildren:i.a.createElement(Te.a,{type:"man"}),unCheckedChildren:i.a.createElement(Te.a,{type:"woman"})}))))};function gt(){var e=Object(s.a)(["\n    position: absolute;\n    left: calc(50% + 2rem);\n    top: 0.5rem;\n    width: 2rem;\n    height: 2rem;\n    background-color: #52c41a;\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n"]);return gt=function(){return e},e}function bt(){var e=Object(s.a)(["\n    text-align: center;\n"]);return bt=function(){return e},e}function ht(){var e=Object(s.a)(["\n    width: 6.6rem;\n    height: 6.6rem;\n    background-image: url(/assets/avatars.jpg);\n    background-position-y: ",";\n    background-position-x: ",";\n    background-size: 600px;\n"]);return ht=function(){return e},e}function Et(){var e=Object(s.a)(["\n    width: 6.6rem;\n    height: 6.6rem;\n    background-image: url(",");\n    background-size: contain;\n    border-radius: 50%;\n"]);return Et=function(){return e},e}function Ot(){var e=Object(s.a)(["\n    padding: 0.8rem;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    position: relative;\n"]);return Ot=function(){return e},e}function jt(){var e=Object(s.a)(["\n    list-style-type: none;\n    padding: 1rem;\n    background-color: #fff;\n    display: flex;\n    flex-wrap: wrap;\n"]);return jt=function(){return e},e}var xt=m.a.ul(jt()),St=m.a.li(Ot()),Ct=Object(m.a)("div")(Et(),function(e){return e.avatar}),kt=Object(m.a)("div")(ht(),function(e){var t=e.avatar;return"-".concat(55+130*Math.floor(t/6),"px")},function(e){var t=e.avatar;return"-".concat(15+(t+6)%6*95,"px")}),wt=m.a.div(bt()),Pt=m.a.div(gt()),It=function(e){var t,n=e.user,r=o.useContext(M).isRevealing,a=n.info,c=a.picture,i=a.login;return o.createElement(St,null,"number"===typeof c?o.createElement(kt,{avatar:c}):o.createElement(Ct,{avatar:c}),o.createElement(wt,null,i),null!==n.score?o.createElement(Pt,null,(t=n.score,r?"number"===typeof t?t.toString():t[0]:"?")):null)},Mt=function(){var e=o.useContext(M).players;return o.createElement(xt,null,e.map(function(e,t){return o.createElement(It,{key:t,user:e})}))};function Rt(){var e=Object(s.a)(["\n    grid-row: 3 / span 1;\n"]);return Rt=function(){return e},e}function zt(){var e=Object(s.a)(["\n    grid-row: 2 / span 1;\n"]);return zt=function(){return e},e}function At(){var e=Object(s.a)(["\n    grid-row: 2 / span 2;\n"]);return At=function(){return e},e}function Dt(){var e=Object(s.a)(["\n    grid-column: 1 / span 2;\n"]);return Dt=function(){return e},e}function Tt(){var e=Object(s.a)(["\n    display: grid;\n    padding: 1rem;\n    width: 100%;\n    height: 100%;\n    grid-gap: 2rem;\n    grid-template-columns: 20rem 1fr;\n    grid-template-rows: 2rem max-content auto;\n"]);return Tt=function(){return e},e}var Nt=m.a.section(Tt()),_t=m.a.header(Dt()),qt=m.a.section(At()),Ft=m.a.section(zt()),Ut=m.a.section(Rt()),Gt=n(578),Lt=n(602),Bt=n(606);function Kt(){var e=Object(s.a)([""]);return Kt=function(){return e},e}function Ht(){var e=Object(s.a)(["\n    display: flex;\n    justify-content: space-between;\n"]);return Ht=function(){return e},e}var Jt=m.a.div(Ht()),Yt=Object(m.a)(Bt.a)(Kt());function Wt(e){var t=e.onSendMessage,n=Object(Ge.a)(""),r=Object(l.a)(n,2),a=r[0],c=r[1],o=function(){""!==a&&(t(a),c())};return i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,null),i.a.createElement(Jt,null,i.a.createElement(Fe.a,{name:"chat",onKeyPress:function(e){if(13===e.charCode)return o()},value:a,onChange:c}),i.a.createElement(Ue.a,{type:"primary",shape:"circle",icon:"enter",onClick:o,style:{flexShrink:0,marginLeft:"0.6rem"}})))}var Qt=n(574),Vt=n(591),Xt=function(e){var t=e.user,n=e.message,r=e.style;return i.a.createElement(Re.a.Item,{style:r},i.a.createElement(Re.a.Item.Meta,{avatar:i.a.createElement(Vt.a,{src:t.picture}),title:t.name,description:n}))},Zt=function(e){var t=e.threads,n=function(e){var n=e.index,r=e.key,a=e.style;return i.a.createElement(Xt,Object.assign({},t[n],{key:r,style:a}))},r=function(e){var n=e.index,r=t[n].message.length;return 60+20*(Math.floor(r/50)+1)};return i.a.createElement("div",{style:{flexGrow:1}},i.a.createElement(Qt.a,null,function(e){var a=e.width,c=e.height;return i.a.createElement(Qt.b,{rowCount:t.length,width:a,height:c,rowHeight:r,rowRenderer:n,scrollToIndex:t.length-1})}))};function $t(){var e=Object(o.useContext)(S.a).user,t=Object(o.useState)([]),n=Object(l.a)(t,2),r=n[0],a=n[1],c=Object(o.useState)(!1),u=Object(l.a)(c,2),s=u[0],m=u[1],f=Object(o.useState)(r.length),d=Object(l.a)(f,2),p=d[0],v=d[1];s&&0!==p&&v(0);var y=function(e){a(function(t){return Object(Gt.a)(t).concat([e])})},g=P({"message-received":function(e){v(function(e){return e+1}),y(e)}});return i.a.createElement(i.a.Fragment,null,i.a.createElement(Yt,{count:p},i.a.createElement(Ue.a,{onClick:function(){return m(!0)},type:"primary",shape:"circle",icon:"message",size:"large"})),i.a.createElement(Lt.a,{width:520,placement:"right",closable:!1,onClose:function(){return m(!1)},visible:s,mask:!0,style:{display:"flex",flexDirection:"column",height:"100%"}},i.a.createElement(Zt,{threads:r}),i.a.createElement(Wt,{onSendMessage:function(t){var n={user:e.info,message:t};y(n),g("send-message",n)}})))}var en=n(376),tn=n(311),nn=function(){var e=Object(o.useContext)(M),t=e.currentStory,n=e.isRevealing,r=e.isCompleted,a=e.players,c=e.actions,u=Object(o.useContext)(He),l=u.actions,s=u.stories.find(function(e){return e.id===t}),m=""!==t&&null!==t,f=function(){return c.setStory(null)};return i.a.createElement(tn.a,null,m&&!r?i.a.createElement(en.a,{title:"Start the game round",placement:"left"},i.a.createElement(Ue.a,{onClick:c.startPlayRound,type:"primary",shape:"circle",icon:"play-circle",size:"large"})):null,r&&!n?i.a.createElement(en.a,{title:"Reveal user scores",placement:"left"},i.a.createElement(Ue.a,{onClick:c.showPlayedCards,type:"primary",shape:"circle",icon:"question-circle",size:"large"})):null,n?i.a.createElement(en.a,{title:"Set the final score",placement:"left"},i.a.createElement(Ue.a,{onClick:function(){s&&(l.updateStory(Object(C.a)({},s,{score:Ce(a)})),f())},type:"primary",shape:"circle",icon:"check-circle",size:"large"})):null,n?i.a.createElement(en.a,{title:"Play another round for the story",placement:"left"},i.a.createElement(Ue.a,{onClick:c.startPlayRound,type:"primary",shape:"circle",icon:"reload",size:"large"})):null,m?i.a.createElement(en.a,{title:"Reset the progress and pick another story",placement:"left"},i.a.createElement(Ue.a,{onClick:f,type:"danger",shape:"circle",icon:"close-circle",size:"large"})):null,i.a.createElement($t,null))};n.d(t,"BoardContainer",function(){return rn}),n.d(t,"default",function(){return an});var rn=function(e){var t=e.match,n=Object(o.useContext)(S.a).user,r=Object(o.useContext)(at.a).mergeGame,l=Object(o.useContext)(M),s=l.isPlaying,m=l.actions,f=t.params.gameID,d=Object(at.c)(f);Object(o.useEffect)(function(){return m.enterRoom({info:{login:n.info.name,picture:n.info.picture}}),m.leaveRoom},[]),Object(Be.a)(Object(c.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ke.a.get("/api/game/".concat(f));case 3:t=e.sent,n=t.data,r(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u.a.error(e.t0.message);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),[f]);var p=Object(S.d)(n,t.params.user);return d?i.a.createElement(Je,{gameId:f},i.a.createElement(Nt,null,i.a.createElement(_t,null,i.a.createElement("h2",null,d.title)),i.a.createElement(qt,null,i.a.createElement(pt,{admin:p})),i.a.createElement(Ft,null,i.a.createElement(Mt,null)),i.a.createElement(Ut,null,i.a.createElement(Ie,{admin:p}),s?i.a.createElement(_,null):null)),i.a.createElement(nn,null)):i.a.createElement("h1",null,"No game")};function an(e){var t=Object(o.useContext)(S.a).user,n=Object(S.d)(t,e.match.params.user);return[S.c.LOGGED_IN,S.c.TEMP_USER].includes(t.loginStatus)?i.a.createElement(z,{gameId:e.match.params.gameID,isAdmin:n},i.a.createElement(rn,e)):i.a.createElement(yt,e)}}}]);
//# sourceMappingURL=3.7de90a06.chunk.js.map