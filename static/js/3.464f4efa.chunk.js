(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{285:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(42),a=n(1),c=function(e){var t=Object(a.useState)(e),n=Object(r.a)(t,2),c=n[0],i=n[1];return[c,function(e){var t=e?e.target.value:"";i(t)}]}},325:function(e,t,n){},471:function(e,t){},574:function(e,t,n){"use strict";n.r(t);var r=n(18),a=n.n(r),c=n(41),i=n(1),o=n.n(i),u=n(580),l=n(42),s=n(35),m=n(36);function f(){var e=Object(s.a)(["\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    padding: 0.6rem 1rem;\n"]);return f=function(){return e},e}function d(){var e=Object(s.a)(["\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    font-size: 2rem;\n    & span.fa {\n        font-size: 1rem;\n    }\n    & > span.userName {\n        font-size: 1rem;\n    }\n"]);return d=function(){return e},e}function p(){var e=Object(s.a)(["\n    text-align: right;\n    line-height: 2rem;\n    font-size: 1.3rem;\n"]);return p=function(){return e},e}function v(){var e=Object(s.a)(["\n    font-size: 1.3rem;\n    line-height: 2rem;\n"]);return v=function(){return e},e}function b(){var e=Object(s.a)(["\n    border: 1px solid #e8e8e8;\n    box-sizing: border-box;\n    margin: 0 0.2rem !important;\n    padding-top: 125%;\n    box-shadow: ",";\n    transform: translateY(",");\n    cursor: pointer;\n    background-color: #fff;\n    position: relative;\n"]);return b=function(){return e},e}function g(){var e=Object(s.a)(["\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    grid-gap: 0.6rem;\n    background-color: #fff;\n    padding: 0.6rem;\n"]);return g=function(){return e},e}var y=m.a.div(g()),h=Object(m.a)("div")(b(),function(e){return e.cardPicked?"0px 4px 12px rgba(25, 88, 203, 0.27)":""},function(e){return e.cardPicked?"-2rem":0}),E=m.a.div(v()),O=m.a.div(p()),j=m.a.div(d()),x=m.a.div(f()),S=n(23),C=n(58),k=n(448),w=n.n(k)()("https://snaks-planning-poker-api.herokuapp.com"),P=function(e){return Object(i.useEffect)(function(){for(var t=Object.entries(e),n=0;n<t.length;n++){var r=t[n],a=Object(l.a)(r,2),c=a[0],i=a[1];w.on(c,i)}return function(){for(var t=Object.entries(e),n=0;n<t.length;n++){var r=t[n],a=Object(l.a)(r,2),c=a[0],i=a[1];w.removeEventListener(c,i)}}},[]),function(e,t){w.emit(e,t)}},R={players:[],isPlaying:!1,isRevealing:!1,currentStory:null},I=i.createContext(Object(C.a)({},R,{isCompleted:!1,actions:{enterRoom:function(){},leaveRoom:function(){},setStory:function(){},startPlayRound:function(){},showPlayedCards:function(){},setPlayerScore:function(){}}})),M=function(e){return e.map(function(e){return Object(C.a)({},e,{score:null})})},z=function(e){var t=e.children,n=e.gameId,r=e.isAdmin,a=i.useState(R),c=Object(l.a)(a,2),o=c[0],u=c[1],s=P({"self-append-user":function(e){var t=e.newPlayer;u(function(e){var n=e.players.map(function(e){return e.id.startsWith("temp__")&&e.info.login===t.info.login?t:e});return Object(C.a)({},e,{players:n})})},"append-user":function(e){var t=e.newPlayer;u(function(e){var n=e.players.concat(t);return r&&m({players:n}),Object(C.a)({},e,{players:n})})},"apply-play-room-patch":function(e){var t=e.patch;u(function(e){return Object(C.a)({},e,t)})},"user-left":function(e){var t=e.userId;u(function(e){return Object(C.a)({},e,{players:e.players.filter(function(e){return e.id!==t})})})}}),m=function(e){return s("emit-play-room-patch",{gameId:n,patch:e}),e},f=function(e){u(function(t){return Object(C.a)({},t,m(e(t)))})},d=o.players.every(function(e){return null!==e.score});return i.createElement(I.Provider,{value:Object(C.a)({},o,{isCompleted:d,actions:{enterRoom:function(e){var t=Object(C.a)({},e,{score:null,id:"temp__".concat(100*Math.random())});u(function(e){return Object(C.a)({},e,{players:e.players.concat(t)})}),s("enter-room",{gameId:n,newPlayer:t})},setStory:function(e){f(function(t){return{isPlaying:!1,isRevealing:!1,currentStory:e,players:M(t.players)}})},startPlayRound:function(){f(function(e){return{isPlaying:!0,isRevealing:!1,players:M(e.players)}})},showPlayedCards:function(){f(function(){return{isPlaying:!1,isRevealing:!0}})},setPlayerScore:function(e){f(function(t){return{players:t.players.map(function(t){return t.info.login===e.info.login?e:t})}})},leaveRoom:function(){s("leave-room",{gameId:n})}}})},t)},A=[{value:1},{value:2},{value:3},{value:5},{value:8},{value:13},{value:21},{value:34},{value:55},{value:89},{value:"question"},{value:"\u221e"},{value:"coffee"}],T=function(e){var t=e.value,n=e.onClick,r=void 0===n?function(){}:n,a=e.cardPicked,c="string"===typeof t?/^\w/.test(t)?i.createElement("span",{className:"fa fa-".concat(t)}):t:t.toString();return i.createElement(h,{onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return r(t)}),cardPicked:a},i.createElement(x,null,i.createElement(E,null,c),i.createElement(j,null,i.createElement("span",null,c)),i.createElement(O,null,c)))};function D(){var e=Object(i.useContext)(S.a).user,t=Object(i.useContext)(I).actions,n=Object(i.useState)(null),r=Object(l.a)(n,2),a=r[0],c=r[1],u=function(n){c(n),t.setPlayerScore({info:{login:e.info.name,picture:e.info.picture},score:n,id:"temp__".concat(100*Math.random())})};return o.a.createElement(y,null,A.map(function(e,t){return o.a.createElement(T,Object.assign({key:"card".concat(t),cardPicked:e.value===a},e,{onClick:u}))}))}var q=n(569),N=n(317),_=n.n(N),U=n(358),F=n.n(U),G=n(290),L=n.n(G),B=n(324),K=n.n(B),H=n(361),J=n.n(H),Y=n(319),W=n.n(Y),Q=n(475),V=n.n(Q),X=n(344),Z=n.n(X),$=n(480),ee=n.n($),te=n(482),ne=n.n(te),re=n(483),ae=n.n(re),ce=n(481),ie=n.n(ce),oe=n(477),ue=n.n(oe),le=n(360),se=n.n(le),me=n(485),fe=n.n(me),de=n(484),pe=n.n(de),ve=(1+Math.sqrt(5))/2,be=F()(V.a,[J.a,W.a]),ge=_()(Math.ceil,be),ye=_()(function(e){return Math.round((Math.pow(ve,e)-Math.pow(-ve,-e))/(2*ve-1))},ge,L()(function(e){return Math.round((t=ve,n=Math.sqrt(5)*e,Math.log(n)/Math.log(t)));var t,n})),he=K()("score"),Ee=ue()(Z()(ee()(String),ie()("string"),ie()("number"))),Oe=ne()([[ae()("coffee"),ie()("Coffee break")],[ae()("question"),ie()("Unclear")],[ae()("\u221e"),ie()("Infinity")],[pe.a,ie()("Unclear")]]),je=Z()(_()(fe.a,se()("string")),_()(ye,se()("number")),_()(Oe,se()("string"))),xe=_()(je,Ee,he);function Se(){var e=Object(i.useContext)(I),t=e.players,n=e.isRevealing,r=e.currentStory;return""===r||null===r?null:o.a.createElement("section",{style:{margin:"0 10px"}},n?o.a.createElement(q.a,null,"Average Score is ",xe(t)):null)}var Ce=n(586),ke=n(584),we=n(563),Pe=n(533),Re=n.n(Pe),Ie=n(11),Me=function(e){var t=e.story,n=e.onSetEditMode,r=e.deleteStory,a=e.isAdmin,c=Object(i.useContext)(I),u=c.currentStory,l=c.actions,s=t.id===u,m=a?[s?null:o.a.createElement(Ie.a,{type:"star",onClick:function(){return l.setStory(t.id)}}),s?null:o.a.createElement(Ie.a,{type:"delete",onClick:function(){return r(t.id)}}),o.a.createElement(Ie.a,{type:"edit",onClick:function(){return n(!0)}})].filter(Boolean):[];return o.a.createElement(ke.a.Item,{actions:m,style:{backgroundColor:s?"#e6f7fe":"#fff",padding:".4rem"}},o.a.createElement(ke.a.Item.Meta,{title:"".concat(t.title," ").concat(0!==t.score?" - ".concat(t.score," sp"):""),description:t.description}))},ze=n(573),Ae=n(576),Te=n(107),De=(n(325),n(285));function qe(e){var t=e.story,n=e.onUpdateStory,r=e.onSetEditMode,a=Object(De.a)(t.title||""),c=Object(l.a)(a,2),i=c[0],u=c[1],s=Object(De.a)(t.description||""),m=Object(l.a)(s,2),f=m[0],d=m[1];return o.a.createElement(ze.a,{onSubmit:function(e){e.preventDefault(),n({title:i,description:f}),r(!1)}},o.a.createElement("header",{className:"Stories-storyHeader"},o.a.createElement(Ae.a,{placeholder:"title of the story",value:i,onChange:u})),o.a.createElement("div",{className:"Stories-storyDescription"},o.a.createElement(Ae.a.TextArea,{placeholder:"Description",value:f,onChange:d})),o.a.createElement("footer",{className:"Stories-storyFooter"},o.a.createElement(Te.a,{onClick:function(){return r(!1)}},"Cancel"),o.a.createElement(Te.a,{htmlType:"submit",type:"primary"},"Save")))}var Ne=n(116),_e=n(65),Ue=i.createContext({stories:[],actions:{addStories:function(){return Promise.resolve()},updateStory:function(){return Promise.resolve()},removeStory:function(){return Promise.resolve()}}}),Fe=function(e){var t=e.children,n=e.gameId,r=i.useState([]),o=Object(l.a)(r,2),s=o[0],m=o[1];Object(Ne.a)(Object(c.a)(a.a.mark(function e(){var t,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.a.get("/api/game/".concat(n));case 2:t=e.sent,r=t.data,m(r.stories||[]);case 5:case"end":return e.stop()}},e,this)})),[n]);var f=function(e){m(function(t){return t.map(function(t){return t.id===e.id?Object(C.a)({},t,e):t})})},d=function(e){m(function(t){return t.filter(function(t){return t.id!==e})})},p=P({"add-story":function(e){var t=e.stories;m(function(e){return e.concat(t)})},"update-story":function(e){var t=e.story;f(t)},"remove-story":function(e){var t=e.id;d(t)}}),v=function(){var e=Object(c.a)(a.a.mark(function e(t){var r,c,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(e){return Object(C.a)({description:"",active:!1,score:0},e)}),e.next=3,_e.a.post("/api/story",{stories:r,gameId:n});case 3:c=e.sent,i=c.data,m(function(e){return e.concat(i)}),p("emit-add-story",{stories:i});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.a.put("/api/story",t);case 2:n=e.sent,r=n.data,f(r),p("emit-update-story",{story:r});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e.a.delete("/api/story",{params:{storyId:t}});case 3:n=e.sent,r=n.data,d(r.id),p("emit-remove-story",r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),u.a.error(e.t0.message);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}();return i.createElement(Ue.Provider,{value:{stories:s,actions:{addStories:v,updateStory:b,removeStory:g}}},t)},Ge=Object(Ce.a)(function(e){var t=Object(i.useState)(!1),n=Object(l.a)(t,2),r=n[0],a=n[1],c=Object(i.useContext)(Ue).actions;return r?o.a.createElement(qe,Object.assign({},e,{onUpdateStory:function(t){c.updateStory(Object(C.a)({},e.story,t))},onSetEditMode:a})):o.a.createElement(Me,{story:e.story,onSetEditMode:a,isAdmin:e.isAdmin,deleteStory:c.removeStory})}),Le=n(0),Be=n.n(Le),Ke=(Be.a.shape({id:Be.a.number.isRequired,title:Be.a.string.isRequired,description:Be.a.string.isRequired,score:Be.a.oneOfType([Be.a.string,Be.a.number]).isRequired}),n(578));function He(){var e=Object(s.a)(["\n    margin: 1rem 0;\n"]);return He=function(){return e},e}function Je(){var e=Object(s.a)(["\n    display: flex;\n    flex-direction: column;\n"]);return Je=function(){return e},e}function Ye(){var e=Object(s.a)(["\n    width: 100%;\n"]);return Ye=function(){return e},e}var We=Object(m.a)(Ke.a)(Ye()),Qe=m.a.div(Je()),Ve=m.a.div(He()),Xe=n(575),Ze=n(572),$e=_()(J.a,K()("score")),et=function(e){var t=e.game,n=e.stories,r=e.onClose,a=n.map(function(e,t){return Object(C.a)({},e,{key:t})});return o.a.createElement(Xe.a,{visible:!0,title:'Report for "'.concat(t.title,'"'),footer:[o.a.createElement(Te.a,{onClick:r,key:"ok-button"},"Ok")],onCancel:r,width:"800px"},o.a.createElement(Ze.a,{dataSource:a,columns:[{title:"Story Tile",dataIndex:"title",sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"Description",dataIndex:"description"},{title:"Story Points",dataIndex:"score",defaultSortOrder:"descend",sorter:function(e,t){return e.score-t.score}}],title:function(){return"Total Score ".concat($e(n))},footer:function(){return"Report generated By FreePlanningPoker"}}))},tt=n(102);var nt=Object(Ce.a)(function(e){var t=e.match.params,n=Object(i.useState)(!1),r=Object(l.a)(n,2),a=r[0],c=r[1],u=Object(i.useContext)(Ue).stories,s=Object(tt.c)(t.gameID);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ie.a,{type:"printer",onClick:function(){return c(!0)}}),a?o.a.createElement(et,{game:s,stories:u,onClose:function(){return c(!1)}}):null)});function rt(){var e=Object(s.a)(["\n    height: 370px;\n    overflow: scroll;\n"]);return rt=function(){return e},e}var at=Re()(function(e){return 0===e.score}),ct=Object(m.a)(ke.a)(rt()),it=function(e){var t=e.stories,n=e.admin;return 0===W()(t)?o.a.createElement("span",null,"No stories"):o.a.createElement(ct,{itemLayout:"vertical",dataSource:t,renderItem:function(e){return o.a.createElement(Ge,{isAdmin:n,key:e.id,story:e})}})},ot=function(e){var t=e.stories,n=e.admin,r=at(t),a=Object(l.a)(r,2),c=a[0],i=a[1];return o.a.createElement(We,{title:"Stories",extra:0===W()(c)?o.a.createElement(nt,null):null},o.a.createElement(we.a,{defaultActiveKey:"1"},o.a.createElement(we.a.TabPane,{tab:"Remaining",key:"1"},o.a.createElement(it,{stories:c,admin:n})),o.a.createElement(we.a.TabPane,{tab:"Played",key:"2"},o.a.createElement(it,{stories:i,admin:n}))))},ut=n(342),lt=n.n(ut);function st(e){var t=e.mode,n=e.toggleMode,r=e.isAdmin,a=e.handleSubmit,c=Object(De.a)(""),i=Object(l.a)(c,2),u=i[0],s=i[1];return r?o.a.createElement(Ve,null,t?o.a.createElement(Ae.a.TextArea,{placeholder:"Story title",value:u,onKeyPress:function(e){if(13===e.charCode){var r=L()(function(e){return{title:e}},lt()("\n",u));a(r),n(t),s()}},onChange:s}):o.a.createElement(Te.a,{onClick:function(){return n(!t)}},"Add new Story")):null}var mt=Object(Ce.a)(function(e){var t=e.admin,n=(e.match.params,Object(i.useState)(!1)),r=Object(l.a)(n,2),a=r[0],c=r[1],u=Object(i.useContext)(Ue),s=u.stories,m=u.actions;return o.a.createElement(Qe,null,o.a.createElement(ot,{stories:s,admin:t}),o.a.createElement(st,{handleSubmit:m.addStories,toggleMode:c,isAdmin:t,mode:a}))}),ft=n(570),dt=function(e){var t=e.history.replace,n=Object(De.a)(""),r=Object(l.a)(n,2),a=r[0],c=r[1],u=Object(i.useState)("male"),s=Object(l.a)(u,2),m=s[0],f=s[1],d=Object(i.useContext)(S.a).setTempUser;return o.a.createElement("div",null,o.a.createElement(Xe.a,{visible:!0,title:"Sit a game in progress",onCancel:function(){return t("/")},onOk:function(e){e.preventDefault(),d(a,m)}},o.a.createElement(ze.a.Item,{label:"Login",labelCol:{span:6},wrapperCol:{span:14}},o.a.createElement(Ae.a,{id:"login",name:"login",placeholder:"Your desired login",value:a,onChange:c})),o.a.createElement(ze.a.Item,{label:"Gender",labelCol:{span:6},wrapperCol:{span:14}},o.a.createElement(ft.a,{checked:"female"===m,onChange:function(e){return f(e?"female":"male")},checkedChildren:o.a.createElement(Ie.a,{type:"man"}),unCheckedChildren:o.a.createElement(Ie.a,{type:"woman"})}))))};function pt(){var e=Object(s.a)(["\n    position: absolute;\n    left: calc(50% + 2rem);\n    top: 0.5rem;\n    width: 2rem;\n    height: 2rem;\n    background-color: #52c41a;\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n"]);return pt=function(){return e},e}function vt(){var e=Object(s.a)(["\n    text-align: center;\n"]);return vt=function(){return e},e}function bt(){var e=Object(s.a)(["\n    width: 6.6rem;\n    height: 6.6rem;\n    background-image: url(/assets/avatars.jpg);\n    background-position-y: ",";\n    background-position-x: ",";\n    background-size: 600px;\n"]);return bt=function(){return e},e}function gt(){var e=Object(s.a)(["\n    width: 6.6rem;\n    height: 6.6rem;\n    background-image: url(",");\n    background-size: contain;\n    border-radius: 50%;\n"]);return gt=function(){return e},e}function yt(){var e=Object(s.a)(["\n    padding: 0.8rem;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    position: relative;\n"]);return yt=function(){return e},e}function ht(){var e=Object(s.a)(["\n    list-style-type: none;\n    padding: 1rem;\n    background-color: #fff;\n    display: flex;\n    flex-wrap: wrap;\n"]);return ht=function(){return e},e}var Et=m.a.ul(ht()),Ot=m.a.li(yt()),jt=Object(m.a)("div")(gt(),function(e){return e.avatar}),xt=Object(m.a)("div")(bt(),function(e){var t=e.avatar;return"-".concat(55+130*Math.floor(t/6),"px")},function(e){var t=e.avatar;return"-".concat(15+(t+6)%6*95,"px")}),St=m.a.div(vt()),Ct=m.a.div(pt()),kt=function(e){var t,n=e.user,r=i.useContext(I).isRevealing,a=n.info,c=a.picture,o=a.login;return i.createElement(Ot,null,"number"===typeof c?i.createElement(xt,{avatar:c}):i.createElement(jt,{avatar:c}),i.createElement(St,null,o),null!==n.score?i.createElement(Ct,null,(t=n.score,r?"number"===typeof t?t.toString():t[0]:"?")):null)},wt=function(){var e=i.useContext(I).players;return i.createElement(Et,null,e.map(function(e,t){return i.createElement(kt,{key:t,user:e})}))};function Pt(){var e=Object(s.a)(["\n    grid-row: 3 / span 1;\n"]);return Pt=function(){return e},e}function Rt(){var e=Object(s.a)(["\n    grid-row: 2 / span 1;\n"]);return Rt=function(){return e},e}function It(){var e=Object(s.a)(["\n    grid-row: 2 / span 2;\n"]);return It=function(){return e},e}function Mt(){var e=Object(s.a)(["\n    grid-column: 1 / span 2;\n"]);return Mt=function(){return e},e}function zt(){var e=Object(s.a)(["\n    display: grid;\n    padding: 1rem;\n    width: 100%;\n    height: 100%;\n    grid-gap: 2rem;\n    grid-template-columns: 20rem 1fr;\n    grid-template-rows: 2rem;\n"]);return zt=function(){return e},e}var At=m.a.section(zt()),Tt=m.a.header(Mt()),Dt=m.a.section(It()),qt=m.a.section(Rt()),Nt=m.a.section(Pt()),_t=n(566),Ut=n(581),Ft=n(585);function Gt(){var e=Object(s.a)([""]);return Gt=function(){return e},e}function Lt(){var e=Object(s.a)(["\n    display: flex;\n    justify-content: space-between;\n"]);return Lt=function(){return e},e}var Bt=m.a.div(Lt()),Kt=Object(m.a)(Ft.a)(Gt());function Ht(e){var t=e.onSendMessage,n=Object(De.a)(""),r=Object(l.a)(n,2),a=r[0],c=r[1],i=function(){""!==a&&(t(a),c())};return o.a.createElement(o.a.Fragment,null,o.a.createElement(q.a,null),o.a.createElement(Bt,null,o.a.createElement(Ae.a,{name:"chat",onKeyPress:function(e){if(13===e.charCode)return i()},value:a,onChange:c}),o.a.createElement(Te.a,{type:"primary",shape:"circle",icon:"enter",onClick:i,style:{flexShrink:0,marginLeft:"0.6rem"}})))}var Jt=n(562),Yt=n(571),Wt=function(e){var t=e.user,n=e.message,r=e.style;return o.a.createElement(ke.a.Item,{style:r},o.a.createElement(ke.a.Item.Meta,{avatar:o.a.createElement(Yt.a,{src:t.picture}),title:t.name,description:n}))},Qt=function(e){var t=e.threads,n=function(e){var n=e.index,r=e.key,a=e.style;return o.a.createElement(Wt,Object.assign({},t[n],{key:r,style:a}))},r=function(e){var n=e.index,r=t[n].message.length;return 60+20*(Math.floor(r/50)+1)};return o.a.createElement("div",{style:{flexGrow:1}},o.a.createElement(Jt.a,null,function(e){var a=e.width,c=e.height;return o.a.createElement(Jt.b,{rowCount:t.length,width:a,height:c,rowHeight:r,rowRenderer:n,scrollToIndex:t.length-1})}))};function Vt(){var e=Object(i.useContext)(S.a).user,t=Object(i.useState)([]),n=Object(l.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!1),u=Object(l.a)(c,2),s=u[0],m=u[1],f=Object(i.useState)(r.length),d=Object(l.a)(f,2),p=d[0],v=d[1];s&&0!==p&&v(0);var b=function(e){a(function(t){return Object(_t.a)(t).concat([e])})},g=P({"message-received":function(e){v(function(e){return e+1}),b(e)}});return o.a.createElement(o.a.Fragment,null,o.a.createElement(Kt,{count:p},o.a.createElement(Te.a,{onClick:function(){return m(!0)},type:"primary",shape:"circle",icon:"message",size:"large"})),o.a.createElement(Ut.a,{width:520,placement:"right",closable:!1,onClose:function(){return m(!1)},visible:s,mask:!0,style:{display:"flex",flexDirection:"column",height:"100%"}},o.a.createElement(Qt,{threads:r}),o.a.createElement(Ht,{onSendMessage:function(t){var n={user:e.info,message:t};b(n),g("send-message",n)}})))}function Xt(){var e=Object(s.a)(["\n    position: fixed !important;\n    right: 2rem;\n    bottom: 2rem;\n    display: flex;\n    flex-direction: column;\n\n    & > * {\n        margin: 0.5rem 0rem !important;\n    }\n"]);return Xt=function(){return e},e}var Zt=Object(m.a)("div")(Xt()),$t=n(564),en=function(){var e=Object(i.useContext)(I),t=e.currentStory,n=e.isRevealing,r=e.isCompleted,a=e.players,c=e.actions,u=Object(i.useContext)(Ue),l=u.actions,s=u.stories.find(function(e){return e.id===t}),m=""!==t&&null!==t,f=function(){return c.setStory(null)};return o.a.createElement(Zt,null,m&&!r?o.a.createElement($t.a,{title:"Start the game round",placement:"left"},o.a.createElement(Te.a,{onClick:c.startPlayRound,type:"primary",shape:"circle",icon:"play-circle",size:"large"})):null,r&&!n?o.a.createElement($t.a,{title:"Reveal user scores",placement:"left"},o.a.createElement(Te.a,{onClick:c.showPlayedCards,type:"primary",shape:"circle",icon:"question-circle",size:"large"})):null,n?o.a.createElement($t.a,{title:"Set the final score",placement:"left"},o.a.createElement(Te.a,{onClick:function(){s&&(l.updateStory(Object(C.a)({},s,{score:xe(a)})),f())},type:"primary",shape:"circle",icon:"check-circle",size:"large"})):null,n?o.a.createElement($t.a,{title:"Play another round for the story",placement:"left"},o.a.createElement(Te.a,{onClick:c.startPlayRound,type:"primary",shape:"circle",icon:"reload",size:"large"})):null,m?o.a.createElement($t.a,{title:"Reset the progress and pick another story",placement:"left"},o.a.createElement(Te.a,{onClick:f,type:"danger",shape:"circle",icon:"close-circle",size:"large"})):null,o.a.createElement(Vt,null))};n.d(t,"BoardContainer",function(){return tn}),n.d(t,"default",function(){return nn});var tn=function(e){var t=e.match,n=Object(i.useContext)(S.a).user,r=Object(i.useContext)(I),l=r.isPlaying,s=r.actions,m=Object(i.useContext)(tt.a).updateGame,f=t.params.gameID,d=Object(tt.c)(f);Object(i.useEffect)(function(){return s.enterRoom({info:{login:n.info.name,picture:n.info.picture}}),s.leaveRoom},[]),Object(Ne.a)(Object(c.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e.a.get("/api/game/".concat(f));case 3:t=e.sent,n=t.data,m(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u.a.error(e.t0.message);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),[f]);var p=Object(S.d)(n,t.params.user);return d?o.a.createElement(Fe,{gameId:f},o.a.createElement(At,null,o.a.createElement(Tt,null,o.a.createElement("h2",null,d.title)),o.a.createElement(Dt,null,o.a.createElement(mt,{admin:p})),o.a.createElement(qt,null,o.a.createElement(wt,null)),o.a.createElement(Nt,null,o.a.createElement(Se,{admin:p}),l?o.a.createElement(D,null):null)),o.a.createElement(en,null)):o.a.createElement("h1",null,"No game")};function nn(e){var t=Object(i.useContext)(S.a).user,n=Object(S.d)(t,e.match.params.user);return[S.c.LOGGED_IN,S.c.TEMP_USER].includes(t.loginStatus)?o.a.createElement(z,{gameId:e.match.params.gameID,isAdmin:n},o.a.createElement(tn,e)):o.a.createElement(dt,e)}}}]);
//# sourceMappingURL=3.464f4efa.chunk.js.map