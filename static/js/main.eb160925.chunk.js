(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{102:function(e,n,t){"use strict";t.d(n,"a",function(){return E}),t.d(n,"b",function(){return O}),t.d(n,"c",function(){return b});var a=t(58),r=t(18),c=t.n(r),u=t(41),i=t(42),o=t(1),s=t.n(o),l=t(578),p=t(106),f=t.n(p),m=t(144),d=t.n(m),h=t(116),v=t(23),g=t(65),E=s.a.createContext();function O(e){var n=e.initialGames,t=void 0===n?[]:n,r=e.children,p=e.readyToFetch,m=Object(o.useState)(t),O=Object(i.a)(m,2),b=O[0],k=O[1],j=Object(o.useContext)(v.a).user;Object(h.a)(Object(u.a)(c.a.mark(function e(){var n,t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,g.a.get("/api/game/user/".concat(j.info.email));case 5:return n=e.sent,t=n.data,e.abrupt("return",k(t.games));case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}},e,this,[[2,10]])})),[p]);var y=function(){var e=Object(u.a)(c.a.mark(function e(n){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.delete("/api/game/",{params:{gameId:n}});case 3:t=e.sent,a=t.data,k(f()(function(e){return e.id!==a.id})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.a.error(e.t0.message);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(c.a.mark(function e(n){var t,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("/api/game",Object(a.a)({},n,{user:j.info.email}));case 3:t=e.sent,r=t.data,k(d()(r.game)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.a.error(e.t0.message);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(n){return e.apply(this,arguments)}}();return s.a.createElement(E.Provider,{value:{games:b,removeGame:y,addGame:x,updateGame:function(e){k(function(n){return n.find(function(n){return n.id===e.id})?n.map(function(n){return n.id===e.id?e:n}):n.concat(e)})}}},r)}var b=function(e){return Object(o.useContext)(E).games.find(function(n){return n.id.toString()===e})}},116:function(e,n,t){"use strict";t.d(n,"a",function(){return r});var a=t(1),r=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return a.useEffect.apply(void 0,[function(){e()}].concat(t))}},176:function(e,n,t){e.exports=t(280)},23:function(e,n,t){"use strict";t.d(n,"c",function(){return E}),t.d(n,"a",function(){return O}),t.d(n,"b",function(){return b}),t.d(n,"d",function(){return k});var a=t(42),r=t(18),c=t.n(r),u=t(41),i=t(58),o=t(1),s=t.n(o),l=new(t(142).a)(Object(i.a)({},{clientID:"Xxgco9YTcg99gVq4BTAykYxtJfYOC3rk",domain:"snkt.eu.auth0.com",responseType:"token id_token",audience:"https://snaks-planning-poker-api.herokuapp.com",redirectUri:"https://snaks-planning-poker.herokuapp.com",scope:"openid profile email"})),p=function(){var e=Object(u.a)(c.a.mark(function e(n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(o.useEffect)(function(){l.checkSession({prompt:"none"},n)},[]);case 1:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}(),f=function(){return Math.round(11*Math.random())},m=[1,3,5,8,10,12,13,15,17,20,22,24],d=[2,3,6,7,8,11,14,16,18,19,21,23],h=function(){l.authorize()},v=function(){l.logout()},g=function(){return new Promise(function(e,n){l.parseHash(function(t,a){t?n(t):e(a)})})},E={NOT_ASKED:"NOT_ASKED",LOGGED_IN:"LOGGED_IN",LOGGED_OUT:"LOGGED_OUT",TEMP_USER:"TEMP_USER"},O=s.a.createContext();function b(e){var n=e.children,t=Object(o.useState)({loginStatus:E.NOT_ASKED,info:null}),r=Object(a.a)(t,2),i=r[0],l=r[1];p(function(){var e=Object(u.a)(c.a.mark(function e(n,t){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=7;break}return e.next=4,g();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=t;case 8:a=e.t0,l(a?{loginStatus:E.LOGGED_IN,info:a.idTokenPayload}:{loginStatus:E.LOGGED_OUT,info:null}),window.location.hash="",e.next=15;break;case 13:e.prev=13,e.t1=e.catch(0);case 15:case"end":return e.stop()}},e,this,[[0,13]])}));return function(n,t){return e.apply(this,arguments)}}());return s.a.createElement(O.Provider,{value:{login:h,logout:v,user:i,setTempUser:function(e,n){l({loginStatus:E.TEMP_USER,info:{name:e,email:e,picture:"male"===n?m[f()]:d[f()]}})}}},n)}O.Consumer;var k=function(e,n){return e.loginStatus===E.LOGGED_IN&&n===e.info.email}},250:function(e,n,t){},253:function(e,n,t){},280:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),c=t(9),u=t(581),i=t(567),o=t(35),s=t(36),l=t(577);function p(){var e=Object(o.a)(["\n    max-width: 320px;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return p=function(){return e},e}function f(){var e=Object(o.a)(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return f=function(){return e},e}var m=s.a.div(f()),d=Object(s.a)(l.a)(p()),h=t(107),v=t(23);function g(){var e=Object(a.useContext)(v.a).login;return r.a.createElement(m,null,r.a.createElement(d,null,r.a.createElement(h.a,{type:"primary",onClick:e},"Sign in")))}var E=t(582),O=t(143),b=t.n(O)()(function(e,n,t,a){return function(c){return e(a,c)?r.a.createElement(n,c):r.a.createElement(E.a,{to:{pathname:t,state:{from:c.location}}})}}),k=b(function(e){return"LOGGED_IN"!==e.loginStatus}),j=(b(function(e){var n=e.loginStatus;return"LOGGED_IN"===n||"LOGGED_OUT"===n}),b(function(e){return"LOGGED_IN"===e.loginStatus})),y=t(42),x=t(566),w=t(580),G=t(564),S=t(11);function _(){var e=Object(o.a)(["\n    text-align: center;\n"]);return _=function(){return e},e}function D(){var e=Object(o.a)(["\n    height: 100%;\n    padding: 1rem;\n    position: relative;\n"]);return D=function(){return e},e}function T(){var e=Object(o.a)(["\n    min-height: 100vh !important;\n"]);return T=function(){return e},e}var I=w.a.Content,N=w.a.Footer,L=w.a.Sider,C=Object(s.a)(w.a)(T()),P=Object(s.a)(I)(D()),A=Object(s.a)(N)(_());function U(e){var n=e.children,t=Object(a.useState)(!0),c=Object(y.a)(t,2),u=c[0],i=c[1];return r.a.createElement(C,null,r.a.createElement(L,{collapsible:!0,collapsed:u,onCollapse:i},r.a.createElement("div",{className:"logo"}),r.a.createElement(G.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},r.a.createElement(G.a.Item,{key:"1"},r.a.createElement(x.a,{to:"/"},r.a.createElement(S.a,{type:"pie-chart"}),r.a.createElement("span",null,"Main"))))),r.a.createElement(w.a,null,r.a.createElement(P,null,n),r.a.createElement(A,null,"Planning Poker")))}t(250),t(253);var M=t(102),K=r.a.lazy(function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,576))}),z=r.a.lazy(function(){return Promise.all([t.e(0),t.e(5),t.e(3)]).then(t.bind(null,573))});Object(c.render)(r.a.createElement(v.b,null,r.a.createElement(function(){var e=Object(a.useContext)(v.a).user.loginStatus,n=e===v.c.LOGGED_IN;return r.a.createElement(u.a,null,r.a.createElement(U,null,e!==v.c.NOT_ASKED?r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"loading ...")},r.a.createElement(M.b,{readyToFetch:n},r.a.createElement(i.a,{exact:!0,path:"/",render:j(K,"/sign-in",{loginStatus:e})}),r.a.createElement(i.a,{path:"/game/:user/:gameID",render:function(e){return r.a.createElement(z,e)}})),r.a.createElement(i.a,{path:"/sign-in",render:k(g,"/",{loginStatus:e})})):null))},null)),document.getElementById("root"))},65:function(e,n,t){"use strict";t.d(n,"a",function(){return u});var a=t(27),r=t.n(a),c=function(e){return("https://snaks-planning-poker-api.herokuapp.com".endsWith("/")?"https://snaks-planning-poker-api.herokuapp.com".slice(-1):"https://snaks-planning-poker-api.herokuapp.com")+(e.startsWith("/")?e:"/".concat(e))},u={get:function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];return r.a.get.apply(r.a,[c(e)].concat(t))},post:function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];return r.a.post.apply(r.a,[c(e)].concat(t))},put:function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];return r.a.put.apply(r.a,[c(e)].concat(t))},delete:function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];return r.a.delete.apply(r.a,[c(e)].concat(t))}}}},[[176,6,4]]]);
//# sourceMappingURL=main.eb160925.chunk.js.map